module.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=59)}([function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("child_process")},function(e,t,r){"use strict";function a(e,t,r){var a=r?" !== ":" === ",i=r?" || ":" && ",o=r?"!":"",s=r?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+a+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+i+s+"("+t+" % 1)"+i+t+a+t+")";default:return"typeof "+t+a+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:a,checkDataTypes:function(e,t){switch(e.length){case 1:return a(e[0],t,!0);default:var r="",i=o(e);for(var s in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+a(s,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var o=t[a];i[o]?r[r.length]=o:"array"===e&&"array"===o&&(r[r.length]=o)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:c,escapeQuotes:l,equal:r(8),ucs2length:r(28),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(u,"").replace(h,"").replace(d,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(f);r&&2==r.length&&(e=t?e.replace(m,"").replace(y,P):e.replace(p,"").replace(v,g));return(r=e.match(w))&&3===r.length?e.replace(E,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:C,getPathExpr:function(e,t,r,a){return S(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=C(r?"/"+j(t):c(t));return S(e,a)},getData:function(e,t,r){var a,i,o,s;if(""===e)return"rootData";if("/"==e[0]){if(!_.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(s=e.match(b)))throw new Error("Invalid JSON-pointer: "+e);if(a=+s[1],"#"==(i=s[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(o="data"+(t-a||""),!i)return o}for(var n=o,l=i.split("/"),u=0;u<l.length;u++){var h=l[u];h&&(o+=c(x(h)),n+=" && "+o)}return n},unescapeFragment:function(e){return x(decodeURIComponent(e))},unescapeJsonPointer:x,escapeFragment:function(e){return encodeURIComponent(j(e))},escapeJsonPointer:j};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,n=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(n,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,h=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,d=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var f=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,v="return errors === 0;",g="validate.errors = null; return true;",y=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,P="return data;",w=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,E=/if \(rootData === undefined\) rootData = data;/;function C(e){return"'"+l(e)+"'"}var _=/^\/(?:[^~]|~0|~1)*$/,b=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function S(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function j(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function x(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t){e.exports=require("process")},function(e,t,r){"use strict";var a=r(27),i=r(8),o=r(5),s=r(12),n=r(29);function c(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return c.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof s)return p(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var i,o,n,u=l.call(this,t,r);return u&&(i=u.schema,t=u.root,n=u.baseId),i instanceof s?o=i.validate||e.call(this,i.schema,t,void 0,n):void 0!==i&&(o=p(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,n)),o}function l(e,t){var r=a.parse(t),i=v(r),o=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==o){var n=y(i),c=this._refs[n];if("string"==typeof c)return u.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[n])instanceof s))return;if(c.validate||this._compile(c),n==y(t))return{schema:c,root:e,baseId:o};e=c}if(!e.schema)return;o=m(this._getId(e.schema))}return d.call(this,r,o,e.schema,e)}function u(e,t,r){var a=l.call(this,e,t);if(a){var i=a.schema,o=a.baseId;e=a.root;var s=this._getId(i);return s&&(o=P(o,s)),d.call(this,r,o,i,e)}}e.exports=c,c.normalizeId=y,c.fullPath=m,c.url=P,c.ids=function(e){var t=y(this._getId(e)),r={"":t},s={"":m(t,!1)},c={},l=this;return n(e,{allKeys:!0},(function(e,t,n,u,h,d,f){if(""!==t){var p=l._getId(e),m=r[u],v=s[u]+"/"+h;if(void 0!==f&&(v+="/"+("number"==typeof f?f:o.escapeFragment(f))),"string"==typeof p){p=m=y(m?a.resolve(m,p):p);var g=l._refs[p];if("string"==typeof g&&(g=l._refs[g]),g&&g.schema){if(!i(e,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(v))if("#"==p[0]){if(c[p]&&!i(e,c[p]))throw new Error('id "'+p+'" resolves to more than one schema');c[p]=e}else l._refs[p]=v}r[t]=m,s[t]=v}})),c},c.inlineRef=p,c.schema=l;var h=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),s=1;s<i.length;s++){var n=i[s];if(n){if(void 0===(r=r[n=o.unescapeFragment(n)]))break;var c;if(!h[n]&&((c=this._getId(r))&&(t=P(t,c)),r.$ref)){var u=P(t,r.$ref),d=l.call(this,a,u);d&&(r=d.schema,a=d.root,t=d.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var f=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(a+=e(r)),a==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(f[o])a++;else if("object"==typeof(r=t[o])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=y(e)),v(a.parse(e))}function v(e){return a.serialize(e).split("#")[0]+"#"}var g=/#\/?$/;function y(e){return e?e.replace(g,""):""}function P(e,t){return t=y(t),a.resolve(e,t)}},function(e,t,r){"use strict";var a=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var s,n,c,l=a(t),u=a(r);if(l&&u){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(l!=u)return!1;var h=t instanceof Date,d=r instanceof Date;if(h!=d)return!1;if(h&&d)return t.getTime()==r.getTime();var f=t instanceof RegExp,p=r instanceof RegExp;if(f!=p)return!1;if(f&&p)return t.toString()==r.toString();var m=i(t);if((n=m.length)!==i(r).length)return!1;for(s=n;0!=s--;)if(!o.call(r,m[s]))return!1;for(s=n;0!=s--;)if(!e(t[c=m[s]],r[c]))return!1;return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";var a=r(7);function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=a.url(e,t),this.missingSchema=a.normalizeId(a.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:o(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,n)}c((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0);var o;!function(e){e[e.v0=0]="v0",e[e.v1=1]="v1",e[e.v2=2]="v2",e[e.v3=3]="v3",e[e.latest=3]="latest"}(o=t.Version||(t.Version={})),t.getCppToolsApi=function(e){return a(this,void 0,void 0,(function*(){let t,r,a=i.extensions.getExtension("ms-vscode.cpptools");if(a)if(function(e){return void 0!==e.getApi}(t=a.isActive?a.exports:yield a.activate())){try{r=t.getApi(e)}catch(e){let a=e;a.message&&a.message.startsWith("Invalid version")&&(r=t.getApi(o.v1))}e!==o.v1&&(r.getVersion?e!==r.getVersion()&&console.warn(`vscode-cpptools-api version ${e} requested, but is not available in the current version of the cpptools extension. Using version ${r.getVersion()} instead.`):console.warn(`vscode-cpptools-api version ${e} requested, but is not available in the current version of the cpptools extension. Using version 1 instead.`))}else r=t,e!==o.v0&&console.warn(`vscode-cpptools-api version ${e} requested, but is not available in version 0.17.5 of the cpptools extension. Using version 0 instead.`);else console.warn("C/C++ extension is not installed");return r}))}},function(e,t,r){"use strict";var a=r(5);e.exports=function(e){a.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,a){var i={key:t,value:e[t]},o={key:a,value:e[a]};return r(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,s;if(Array.isArray(t)){for(s="[",r=0;r<t.length;r++)r&&(s+=","),s+=e(t[r])||"null";return s+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var n=o.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(s="",r=0;r<c.length;r++){var l=c[r],u=e(t[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return o.splice(n,1),"{"+s+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var n=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(n){var c="unknown keyword: "+n;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(a+=" var validate = ",i&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var l=e.level,u=e.dataLevel,h=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),f=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,m="data"+(u||""),v="valid"+l;if(!1===e.schema){e.isTop?p=!0:a+=" var "+v+" = false; ",(Y=Y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";var g=a;a=Y.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=i?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var y=e.isTop;l=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var P="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(P);e.logger.warn(P)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((u=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),i&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+l+" = errors;"}v="valid"+l,p=!e.opts.allErrors;var w="",E="",C=e.schema.type,_=Array.isArray(C);if(C&&e.opts.nullable&&!0===e.schema.nullable&&(_?-1==C.indexOf("null")&&(C=C.concat("null")):"null"!=C&&(C=[C,"null"],_=!0)),_&&1==C.length&&(C=C[0],_=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),C){if(e.opts.coerceTypes)var b=e.util.coerceToTypes(e.opts.coerceTypes,C);var S=e.RULES.types[C];if(b||_||!0===S||S&&!J(S)){d=e.schemaPath+".type",f=e.errSchemaPath+"/type",d=e.schemaPath+".type",f=e.errSchemaPath+"/type";var j=_?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[j](C,m,!0)+") { ",b){var x="dataType"+l,k="coerced"+l;a+=" var "+x+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(a+=" if ("+x+" == 'object' && Array.isArray("+m+")) "+x+" = 'array'; "),a+=" var "+k+" = undefined; ";var D="",R=b;if(R)for(var F,I=-1,A=R.length-1;I<A;)F=R[I+=1],I&&(a+=" if ("+k+" === undefined) { ",D+="}"),"array"==e.opts.coerceTypes&&"array"!=F&&(a+=" if ("+x+" == 'array' && "+m+".length == 1) { "+k+" = "+m+" = "+m+"[0]; "+x+" = typeof "+m+";  } "),"string"==F?a+=" if ("+x+" == 'number' || "+x+" == 'boolean') "+k+" = '' + "+m+"; else if ("+m+" === null) "+k+" = ''; ":"number"==F||"integer"==F?(a+=" if ("+x+" == 'boolean' || "+m+" === null || ("+x+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==F&&(a+=" && !("+m+" % 1)"),a+=")) "+k+" = +"+m+"; "):"boolean"==F?a+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+k+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+k+" = true; ":"null"==F?a+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+k+" = null; ":"array"==e.opts.coerceTypes&&"array"==F&&(a+=" if ("+x+" == 'string' || "+x+" == 'number' || "+x+" == 'boolean' || "+m+" == null) "+k+" = ["+m+"]; ");a+=" "+D+" if ("+k+" === undefined) {   ",(Y=Y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",a+=_?""+C.join(","):""+C,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=_?""+C.join(","):""+C,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";g=a;a=Y.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  ";var O=u?"data"+(u-1||""):"parentData";a+=" "+m+" = "+k+"; ",u||(a+="if ("+O+" !== undefined)"),a+=" "+O+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+k+"; } "}else{(Y=Y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",a+=_?""+C.join(","):""+C,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=_?""+C.join(","):""+C,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";g=a;a=Y.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!o)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(a+=" } if (errors === ",a+=y?"0":"errs_"+l,a+=") { ",E+="}");else{var $=e.RULES;if($)for(var T=-1,M=$.length-1;T<M;)if(J(S=$[T+=1])){if(S.type&&(a+=" if ("+e.util.checkDataType(S.type,m)+") { "),e.opts.useDefaults)if("object"==S.type&&e.schema.properties){h=e.schema.properties;var N=Object.keys(h);if(N)for(var L,U=-1,B=N.length-1;U<B;){if(void 0!==(q=h[L=N[U+=1]]).default){var V=m+e.util.getProperty(L);if(e.compositeRule){if(e.opts.strictDefaults){P="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(P);e.logger.warn(P)}}else a+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+V+" === null || "+V+" === '' "),a+=" ) "+V+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(q.default)+" ":a+=" "+JSON.stringify(q.default)+" ",a+="; "}}}else if("array"==S.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){I=-1;for(var q,G=z.length-1;I<G;)if(void 0!==(q=z[I+=1]).default){V=m+"["+I+"]";if(e.compositeRule){if(e.opts.strictDefaults){P="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(P);e.logger.warn(P)}}else a+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+V+" === null || "+V+" === '' "),a+=" ) "+V+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(q.default)+" ":a+=" "+JSON.stringify(q.default)+" ",a+="; "}}}var Q=S.rules;if(Q)for(var K,H=-1,W=Q.length-1;H<W;)if(Z(K=Q[H+=1])){var X=K.code(e,K.keyword,S.type);X&&(a+=" "+X+" ",p&&(w+="}"))}if(p&&(a+=" "+w+" ",w=""),S.type&&(a+=" } ",C&&C===S.type&&!b)){a+=" else { ";var Y;d=e.schemaPath+".type",f=e.errSchemaPath+"/type";(Y=Y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",a+=_?""+C.join(","):""+C,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=_?""+C.join(","):""+C,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),a+=" } "):a+=" {} ";g=a;a=Y.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}p&&(a+=" if (errors === ",a+=y?"0":"errs_"+l,a+=") { ",E+="}")}}function J(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return p&&(a+=" "+E+" "),y?(i?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+l+";",a=e.util.cleanUpCode(a),y&&(a=e.util.finalCleanUpCode(a,i)),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d=e.opts.$data&&n&&n.$data;d?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n;var f="maximum"==t,p=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],v=e.opts.$data&&m&&m.$data,g=f?"<":">",y=f?">":"<",P=void 0;if(v){var w=e.util.getData(m.$data,s,e.dataPathArr),E="exclusive"+o,C="exclType"+o,_="exclIsNumber"+o,b="' + "+(x="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+w+"; ",i+=" var "+E+"; var "+C+" = typeof "+(w="schemaExcl"+o)+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ";var S;P=p;(S=S||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(P||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var j=i;i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+C+" == 'number' ? ( ("+E+" = "+a+" === undefined || "+w+" "+g+"= "+a+") ? "+h+" "+y+"= "+w+" : "+h+" "+y+" "+a+" ) : ( ("+E+" = "+w+" === true) ? "+h+" "+y+"= "+a+" : "+h+" "+y+" "+a+" ) || "+h+" !== "+h+") { var op"+o+" = "+E+" ? '"+g+"' : '"+g+"='; ",void 0===n&&(P=p,l=e.errSchemaPath+"/"+p,a=w,d=v)}else{b=g;if((_="number"==typeof m)&&d){var x="'"+b+"'";i+=" if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" ( "+a+" === undefined || "+m+" "+g+"= "+a+" ? "+h+" "+y+"= "+m+" : "+h+" "+y+" "+a+" ) || "+h+" !== "+h+") { "}else{_&&void 0===n?(E=!0,P=p,l=e.errSchemaPath+"/"+p,a=m,y+="="):(_&&(a=Math[f?"min":"max"](m,n)),m===(!_||a)?(E=!0,P=p,l=e.errSchemaPath+"/"+p,y+="="):(E=!1,b+="="));x="'"+b+"'";i+=" if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+h+" "+y+" "+a+" || "+h+" !== "+h+") { "}}P=P||t,(S=S||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(P||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+x+", limit: "+a+", exclusive: "+E+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+b+" ",i+=d?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+n,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";j=i;return i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d=e.opts.$data&&n&&n.$data;d?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n,i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var f=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=d?"' + "+a+" + '":""+n,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+n,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d=e.opts.$data&&n&&n.$data;d?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n;var f="maxLength"==t?">":"<";i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?i+=" "+h+".length ":i+=" ucs2length("+h+") ",i+=" "+f+" "+a+") { ";var p=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=d?"' + "+a+" + '":""+n,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+n,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d=e.opts.$data&&n&&n.$data;d?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n,i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var f=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=d?"' + "+a+" + '":""+n,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+n,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,r){"use strict";var a=r(4),i=a.spawn,o=a.exec;function s(e,t,r){var a={};try{Object.keys(e).forEach((function(r){e[r].forEach((function(e){a[e]||(n(e,t),a[e]=1)})),a[r]||(n(r,t),a[r]=1)}))}catch(e){if(r)return r(e);throw e}if(r)return r()}function n(e,t){try{process.kill(parseInt(e,10),t)}catch(e){if("ESRCH"!==e.code)throw e}}function c(e,t,r,a,i){var o=a(e),s="";o.stdout.on("data",(function(e){e=e.toString("ascii");s+=e}));o.on("close",(function(o){delete r[e],0==o?s.match(/\d+/g).forEach((function(o){o=parseInt(o,10),t[e].push(o),t[o]=[],r[o]=1,c(o,t,r,a,i)})):0==Object.keys(r).length&&i()}))}e.exports=function(e,t,r){var a={},n={};switch(a[e]=[],n[e]=1,"function"==typeof t&&void 0===r&&(r=t,t=void 0),process.platform){case"win32":o("taskkill /pid "+e+" /T /F",r);break;case"darwin":c(e,a,n,(function(e){return i("pgrep",["-P",e])}),(function(){s(a,t,r)}));break;default:c(e,a,n,(function(e){return i("ps",["-o","pid","--no-headers","--ppid",e])}),(function(){s(a,t,r)}))}}},function(e,t,r){"use strict";var a=r(26),i=r(7),o=r(30),s=r(12),n=r(13),c=r(31),l=r(32),u=r(53),h=r(5);e.exports=g,g.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},g.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},g.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,a);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return _(this,t=i.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,a,!0),this},g.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},g.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return a},g.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var o=r.schema,n=r.root,c=r.baseId,l=a.call(e,o,n,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:o,root:n,baseId:c,validate:l}),l}}(this,e)}},g.prototype.removeSchema=function(e){if(e instanceof RegExp)return P(this,this._schemas,e),P(this,this._refs,e),this;switch(typeof e){case"undefined":return P(this,this._schemas),P(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var o=this._getId(e);o&&(o=i.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},g.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},g.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var s=e[o];s&&(i+=a+s.dataPath+" "+s.message+r)}return i.slice(0,-r.length)},g.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,n=o?o(e):e,c=this._cache.get(n);if(c)return c;a=a||!1!==this._opts.addUsedSchema;var l=i.normalizeId(this._getId(e));l&&a&&_(this,l);var u,h=!1!==this._opts.validateSchema&&!t;h&&!(u=l&&l==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=i.ids.call(this,e),f=new s({id:l,schema:e,localRefs:d,cacheKey:n,meta:r});"#"!=l[0]&&a&&(this._refs[l]=f);this._cache.put(n,f),h&&u&&this.validateSchema(e,!0);return f},g.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=a.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function o(){var t=e.validate,r=t.apply(this,arguments);return o.errors=t.errors,r}},g.prototype.compileAsync=r(54);var d=r(55);g.prototype.addKeyword=d.add,g.prototype.getKeyword=d.get,g.prototype.removeKeyword=d.remove,g.prototype.validateKeyword=d.validate;var f=r(9);g.ValidationError=f.Validation,g.MissingRefError=f.MissingRef,g.$dataMetaSchema=u;var p="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],v=["/properties"];function g(e){if(!(this instanceof g))return new g(e);e=this._opts=h.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:b,warn:b,error:b};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return C;case"id":return w;default:return E}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=n),this._metaOpts=function(e){for(var t=h.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(58),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var a=r(19);e._opts.$data&&(a=u(a,v));e.addMetaSchema(a,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function P(e,t,r){for(var a in t){var i=t[a];i.meta||r&&!r.test(a)||(e._cache.del(i.cacheKey),delete t[a])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function E(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function C(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function _(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function b(){}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"vs_toolchain":{"type":"object","properties":{"CMAKE_GENERATOR_PLATFORM":{"type":"string","description":"The target platform","enum":["Win32","x64","ARM","ARM64"]},"CMAKE_GENERATOR_TOOLSET":{"type":"string","description":"The toolset to select","pattern":"^(v\\\\d\\\\d\\\\d)?((^|,)((version|cuda)=\\\\d+\\\\.\\\\d+|host=(x86|x64)))*$"},"CMAKE_SYSTEM_NAME":{"type":"string","description":"The system name to target e.g WindowsStore","examples":["WindowsStore","WindowsPhone","WindowsCE"]},"CMAKE_SYSTEM_VERSION":{"type":"string","description":"The target system verion to use e.g. 8.1 10.0","examples":["8.0","8.1","10.0"]},"CMAKE_SYSTEM_PROCESSOR":{"type":"string","description":"The name of the target CPU. Used only for Windows CE. See CMAKE_GENERATOR_PLATFORM"}},"additionalProperties":false,"required":["CMAKE_GENERATOR_PLATFORM"]},"toolchain_file":{"type":"string"},"compiler_toolchain":{"type":"object","properties":{"CMAKE_SYSTEM_NAME":{"type":"string","description":"The target system name","examples":["Linux","Windows","Darwin"]},"CMAKE_SYSTEM_PROCESSOR":{"type":"string","description":"The target processor type"},"CMAKE_SYSROOT":{"type":"string","description":"The sysroot passed to the compiler"},"CMAKE_STAGING_PREFIX":{"type":"string","description":"The path to install to"},"CMAKE_C_COMPILER":{"type":"string","description":"The path or executable name of the C compiler","examples":["cc","gcc","clang","cl.exe"]},"CMAKE_C_COMPILER_TARGET":{"type":"string","description":"The C compiler target for cross-compiling (e.g. for clang)"},"CMAKE_CXX_COMPILER":{"type":"string","description":"The path or executable name of the C++ compiler","examples":["c++","g++","clang++","cl.exe"]},"CMAKE_CXX_COMPILER_TARGET":{"type":"string","description":"The C++ compiler target for cross-compiling (e.g. for clang)"}},"additionalProperties":{"type":"string"}},"configuration":{"type":"object","properties":{"name":{"type":"string"},"buildDirectory":{"type":"string"},"generator":{"type":"string","enum":["Borland Makefiles","MSYS Makefiles","MinGW Makefiles","NMake Makefiles","NMake Makefiles JOM","Unix Makefiles","Watcom WMake","Ninja","Visual Studio 6","Visual Studio 7","Visual Studio 7 .NET 2003","Visual Studio 8 2005","Visual Studio 9 2008","Visual Studio 10 2010","Visual Studio 11 2012","Visual Studio 12 2013","Visual Studio 14 2015","Visual Studio 15 2017","Visual Studio 16 2019","Xcode","Green Hills MULTI"]},"extraGenerator":{"type":"string","title":"Extra Generator","description":"Extra generator for an auxiliary IDE tool.","enum":["CodeBlocks","CodeLite","Eclipse CDT4","Kate","Sublime Text 2"]},"buildType":{"type":"string","description":"The CMake build type (see CMAKE_BUILD_TYPE)","examples":["","Debug","Release","RelWithDebInfo","MinSizeRel"]},"toolchain":{"description":"The toolchain for your generator selection"},"env":{"type":"object","description":"Additional environment variables","patternProperties":{"\\\\w+":{"type":"string"}}},"cacheEntries":{"type":"array","description":"Additional CMake cache entries added to the command line","items":{"type":"object","properties":{"name":{"type":"string","description":"Entry name"},"value":{"type":"string","description":"Entry value"},"type":{"type":"string","description":"Entry type","enum":["BOOL","FILEPATH","PATH","STRING","INTERNAL"],"required":["name","value"]}}}}},"required":["name","buildType"],"additionalProperties":false,"allOf":[{"if":{"required":["generator"],"properties":{"generator":{"pattern":"Visual Studio.+"}}},"then":{"properties":{"toolchain":{"oneOf":[{"$ref":"#/definitions/toolchain_file"},{"$ref":"#/definitions/vs_toolchain"}]}}}},{"if":{"properties":{"generator":{"pattern":".*(Ninja|Makefiles|WMake).*"}}},"then":{"properties":{"toolchain":{"oneOf":[{"$ref":"#/definitions/toolchain_file"},{"$ref":"#/definitions/compiler_toolchain"}]}}}}]}},"type":"object","properties":{"configurations":{"type":"array","description":"List of configurations","items":{"$ref":"#/definitions/configuration"}}},"required":["configurations"],"additionalProperties":false}')},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("net")},function(e){e.exports=JSON.parse('{"a":"0.7.1"}')},function(e,t,r){"use strict";var a=r(7),i=r(5),o=r(9),s=r(13),n=r(14),c=i.ucs2length,l=r(8),u=o.Validation;function h(e,t,r){var a=f.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function d(e,t,r){var a=f.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function f(e,t,r){for(var a=0;a<this._compilations.length;a++){var i=this._compilations[a];if(i.schema==e&&i.root==t&&i.baseId==r)return a}return-1}function p(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function v(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function g(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}e.exports=function e(t,r,f,P){var w=this,E=this._opts,C=[void 0],_={},b=[],S={},j=[],x={},k=[];r=r||{schema:t,refVal:C,refs:_};var D=h.call(this,t,r,P),R=this._compilations[D.index];if(D.compiling)return R.callValidate=function e(){var t=R.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var F=this._formats,I=this.RULES;try{var A=$(t,r,f,P);R.validate=A;var O=R.callValidate;return O&&(O.schema=A.schema,O.errors=null,O.refs=A.refs,O.refVal=A.refVal,O.root=A.root,O.$async=A.$async,E.sourceCode&&(O.source=A.source)),A}finally{d.call(this,t,r,P)}function $(t,s,h,d){var f=!s||s&&s.schema==t;if(s.schema!=r.schema)return e.call(w,t,s,h,d);var P,S=!0===t.$async,x=n({isTop:!0,schema:t,isRoot:f,baseId:d,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:I,validate:n,util:i,resolve:a,resolveRef:T,usePattern:L,useDefault:U,useCustomRule:B,opts:E,formats:F,logger:w.logger,self:w});x=y(C,v)+y(b,p)+y(j,m)+y(k,g)+x,E.processCode&&(x=E.processCode(x));try{P=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",x)(w,I,F,r,C,j,k,l,c,u),C[0]=P}catch(e){throw w.logger.error("Error compiling schema, function code:",x),e}return P.schema=t,P.errors=null,P.refs=_,P.refVal=C,P.root=f?P:s,S&&(P.$async=!0),!0===E.sourceCode&&(P.source={code:x,patterns:b,defaults:j}),P}function T(t,i,o){i=a.url(t,i);var s,n,c=_[i];if(void 0!==c)return N(s=C[c],n="refVal["+c+"]");if(!o&&r.refs){var l=r.refs[i];if(void 0!==l)return N(s=r.refVal[l],n=M(i,s))}n=M(i);var u=a.call(w,$,r,i);if(void 0===u){var h=f&&f[i];h&&(u=a.inlineRef(h,E.inlineRefs)?h:e.call(w,h,r,f,t))}if(void 0!==u)return function(e,t){var r=_[e];C[r]=t}(i,u),N(u,n);!function(e){delete _[e]}(i)}function M(e,t){var r=C.length;return C[r]=t,_[e]=r,"refVal"+r}function N(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function L(e){var t=S[e];return void 0===t&&(t=S[e]=b.length,b[t]=e),"pattern"+t}function U(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=x[t];return void 0===r&&(r=x[t]=j.length,j[r]=e),"default"+r}}function B(e,t,r,a){if(!1!==w._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var s="keyword schema is invalid: "+w.errorsText(o.errors);if("log"!=w._opts.validateSchema)throw new Error(s);w.logger.error(s)}}var n,c=e.definition.compile,l=e.definition.inline,u=e.definition.macro;if(c)n=c.call(w,t,r,a);else if(u)n=u.call(w,t,r,a),!1!==E.validateSchema&&w.validateSchema(n,!0);else if(l)n=l.call(w,a,e.keyword,t,r);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var h=k.length;return k[h]=n,{code:"customRule"+h,validate:n}}}},function(e,t,r){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,i=1;i<a;++i)t[i]=t[i].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var a=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=t("[\\:\\/\\?\\#\\[\\]\\@]",o),n=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=r(r(i+"|"+t(c,o,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(h+"\\."+h+"\\."+h+"\\."+h),f=r(a+"{1,4}"),p=r(r(f+"\\:"+f)+"|"+d),m=r(r(f+"\\:")+"{6}"+p),v=r("\\:\\:"+r(f+"\\:")+"{5}"+p),g=r(r(f)+"?\\:\\:"+r(f+"\\:")+"{4}"+p),y=r(r(r(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+r(f+"\\:")+"{3}"+p),P=r(r(r(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+r(f+"\\:")+"{2}"+p),w=r(r(r(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+p),E=r(r(r(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+p),C=r(r(r(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),_=r(r(r(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),b=r([m,v,g,y,P,w,E,C,_].join("|")),S=r(r(c+"|"+i)+"+"),j=(r(b+"\\%25"+S),r(b+r("\\%25|\\%(?!"+a+"{2})")+S)),x=r("[vV]"+a+"+\\."+t(c,o,"[\\:]")+"+"),k=r("\\["+r(j+"|"+b+"|"+x)+"\\]"),D=r(r(i+"|"+t(c,o))+"*"),R=r(k+"|"+d+"(?!"+D+")|"+D),F=r("[0-9]*"),I=r(r(u+"@")+"?"+R+r("\\:"+F)+"?"),A=r(i+"|"+t(c,o,"[\\:\\@]")),O=r(A+"*"),$=r(A+"+"),T=r(r(i+"|"+t(c,o,"[\\@]"))+"+"),M=r(r("\\/"+O)+"*"),N=r("\\/"+r($+M)+"?"),L=r(T+M),U=r($+M),B="(?!"+A+")",V=(r(M+"|"+N+"|"+L+"|"+U+"|"+B),r(r(A+"|"+t("[\\/\\?]",n))+"*")),z=r(r(A+"|[\\/\\?]")+"*"),q=r(r("\\/\\/"+I+M)+"|"+N+"|"+U+"|"+B),G=r(l+"\\:"+q+r("\\?"+V)+"?"+r("\\#"+z)+"?"),Q=r(r("\\/\\/"+I+M)+"|"+N+"|"+L+"|"+B),K=r(Q+r("\\?"+V)+"?"+r("\\#"+z)+"?");return r(G+"|"+K),r(l+"\\:"+q+r("\\?"+V)+"?"),r(r("\\/\\/("+r("("+u+")@")+"?("+R+")"+r("\\:("+F+")")+"?)")+"?("+M+"|"+N+"|"+U+"|"+B+")"),r("\\?("+V+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+R+")"+r("\\:("+F+")")+"?)")+"?("+M+"|"+N+"|"+L+"|"+B+")"),r("\\?("+V+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+R+")"+r("\\:("+F+")")+"?)")+"?("+M+"|"+N+"|"+U+"|"+B+")"),r("\\?("+V+")"),r("\\#("+z+")"),r("("+u+")@"),r("\\:("+F+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,o,"[\\:\\@\\/\\?]",n),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,o),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,s),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+b+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+S+")")+"?\\]?$")}}var s=o(!1),n=o(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,o=void 0;try{for(var s,n=e[Symbol.iterator]();!(a=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,h=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(f[e])}function g(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(d,".")).split("."),t).join(".");return a+i}function y(e){for(var t=[],r=0,a=e.length;r<a;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<a){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}var P=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var a=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;a+=36)e=p(e/35);return p(a+36*e/(e+38))},E=function(e){var t,r=[],a=e.length,i=0,o=128,s=72,n=e.lastIndexOf("-");n<0&&(n=0);for(var c=0;c<n;++c)e.charCodeAt(c)>=128&&v("not-basic"),r.push(e.charCodeAt(c));for(var u=n>0?n+1:0;u<a;){for(var h=i,d=1,f=36;;f+=36){u>=a&&v("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>p((l-i)/d))&&v("overflow"),i+=m*d;var g=f<=s?1:f>=s+26?26:f-s;if(m<g)break;var y=36-g;d>p(l/y)&&v("overflow"),d*=y}var P=r.length+1;s=w(i-h,P,0==h),p(i/P)>l-o&&v("overflow"),o+=p(i/P),i%=P,r.splice(i++,0,o)}return String.fromCodePoint.apply(String,r)},C=function(e){var t=[],r=(e=y(e)).length,a=128,i=0,o=72,s=!0,n=!1,c=void 0;try{for(var u,h=e[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;d<128&&t.push(m(d))}}catch(e){n=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(n)throw c}}var f=t.length,g=f;for(f&&t.push("-");g<r;){var E=l,C=!0,_=!1,b=void 0;try{for(var S,j=e[Symbol.iterator]();!(C=(S=j.next()).done);C=!0){var x=S.value;x>=a&&x<E&&(E=x)}}catch(e){_=!0,b=e}finally{try{!C&&j.return&&j.return()}finally{if(_)throw b}}var k=g+1;E-a>p((l-i)/k)&&v("overflow"),i+=(E-a)*k,a=E;var D=!0,R=!1,F=void 0;try{for(var I,A=e[Symbol.iterator]();!(D=(I=A.next()).done);D=!0){var O=I.value;if(O<a&&++i>l&&v("overflow"),O==a){for(var $=i,T=36;;T+=36){var M=T<=o?1:T>=o+26?26:T-o;if($<M)break;var N=$-M,L=36-M;t.push(m(P(M+N%L,0))),$=p(N/L)}t.push(m(P($,0))),o=w(i,k,g==f),i=0,++g}}}catch(e){R=!0,F=e}finally{try{!D&&A.return&&A.return()}finally{if(R)throw F}}++i,++a}return t.join("")},_={version:"2.1.0",ucs2:{decode:y,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:E,encode:C,toASCII:function(e){return g(e,(function(e){return h.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return g(e,(function(e){return u.test(e)?E(e.slice(4).toLowerCase()):e}))}},b={};function S(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function j(e){for(var t="",r=0,a=e.length;r<a;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(a-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(a-r>=9){var s=parseInt(e.substr(r+4,2),16),n=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&n)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function x(e,t){function r(e){var r=j(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,S).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,S).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,S).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,S).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,S).replace(t.PCT_ENCODED,i)),e}function k(e){return e.replace(/^0*(.*)/,"$1")||"0"}function D(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=c(r,2)[1];return a?a.split(".").map(k).join("."):e}function R(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=c(r,3),i=a[1],o=a[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),n=c(s,2),l=n[0],u=n[1],h=u?u.split(":").map(k):[],d=l.split(":").map(k),f=t.IPV4ADDRESS.test(d[d.length-1]),p=f?7:8,m=d.length-p,v=Array(p),g=0;g<p;++g)v[g]=h[g]||d[m+g]||"";f&&(v[p-1]=D(v[p-1],t));var y=v.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],P=void 0;if(y&&y.length>1){var w=v.slice(0,y.index),E=v.slice(y.index+y.length);P=w.join(":")+"::"+E.join(":")}else P=v.join(":");return o&&(P+="%"+o),P}return e}var F=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?n:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(F);if(i){I?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=R(D(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=b[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)x(r,a);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=_.toASCII(r.host.replace(a.PCT_ENCODED,j).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}x(r,s)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var O=/^\.\.?\//,$=/^\/\.(\/|$)/,T=/^\/\.\.(\/|$)/,M=/^\/?(?:.|\n)*?(?=\/|$)/;function N(e){for(var t=[];e.length;)if(e.match(O))e=e.replace(O,"");else if(e.match($))e=e.replace($,"/");else if(e.match(T))e=e.replace(T,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(M);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?n:s,a=[],i=b[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?_.toUnicode(e.host):_.toASCII(e.host.replace(r.PCT_ENCODED,j).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}x(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var o=function(e,t){var r=!1!==t.iri?n:s,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(R(D(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(a.push(":"),a.push(e.port.toString(10))),a.length?a.join(""):void 0}(e,t);if(void 0!==o&&("suffix"!==t.reference&&a.push("//"),a.push(o),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||i&&i.absolutePath||(c=N(c)),void 0===o&&(c=c.replace(/^\/\//,"/%2F")),a.push(c)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function U(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={};return arguments[3]||(e=A(L(e,r),r),t=A(L(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=N(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=N(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=N(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=N(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function B(e,t){return e&&e.toString().replace(t&&t.iri?n.PCT_ENCODED:s.PCT_ENCODED,j)}var V={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},z={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},q={},G="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",K=r(r("%[EFef][0-9A-Fa-f]%"+Q+Q+"%"+Q+Q)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+Q+Q)+"|"+r("%"+Q+Q)),H=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),W=new RegExp(G,"g"),X=new RegExp(K,"g"),Y=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',H),"g"),J=new RegExp(t("[^]",G,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Z=J;function ee(e){var t=j(e);return t.match(W)?t:e}var te={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},s=r.query.split("&"),n=0,c=s.length;n<c;++n){var l=s[n].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),h=0,d=u.length;h<d;++h)a.push(u[h]);break;case"subject":r.subject=B(l[1],t);break;case"body":r.body=B(l[1],t);break;default:i=!0,o[B(l[0],t)]=B(l[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var f=0,p=a.length;f<p;++f){var m=a[f].split("@");if(m[0]=B(m[0]),t.unicodeSupport)m[1]=B(m[1],t).toLowerCase();else try{m[1]=_.toASCII(B(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[f]=m.join("@")}return r},serialize:function(e,t){var r,a=e,o=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(o){for(var s=0,n=o.length;s<n;++s){var c=String(o[s]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(X,ee).replace(X,i).replace(Y,S),h=c.slice(l+1);try{h=t.iri?_.toUnicode(h):_.toASCII(B(h,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[s]=u+"@"+h}a.path=o.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var p in d)d[p]!==q[p]&&f.push(p.replace(X,ee).replace(X,i).replace(J,S)+"="+d[p].replace(X,ee).replace(X,i).replace(Z,S));return f.length&&(a.query=f.join("&")),a}},re=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(re),a=e;if(r){var i=t.scheme||a.scheme||"urn",o=r[1].toLowerCase(),s=r[2],n=i+":"+(t.nid||o),c=b[n];a.nid=o,a.nss=s,a.path=void 0,c&&(a=c.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,i=r+":"+(t.nid||a),o=b[i];o&&(e=o.serialize(e,t));var s=e,n=e.nss;return s.path=(a||t.nid)+":"+n,s}},ie=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,oe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ie)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};b[V.scheme]=V,b[z.scheme]=z,b[te.scheme]=te,b[ae.scheme]=ae,b[oe.scheme]=oe,e.SCHEMES=b,e.pctEncChar=S,e.pctDecChars=j,e.parse=A,e.removeDotSegments=N,e.serialize=L,e.resolveComponents=U,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return L(U(A(e,a),A(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=L(A(e,t),t):"object"===a(e)&&(e=A(L(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=L(A(e,r),r):"object"===a(e)&&(e=L(e,r)),"string"==typeof t?t=L(A(t,r),r):"object"===a(t)&&(t=L(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?n.ESCAPE:s.ESCAPE,S)},e.unescapeComponent=B,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,a=e.length,i=0;i<a;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},function(e,t,r){"use strict";var a=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,i,o,s,n,c,l,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in r(o,s,n,c,l,u,h),o){var f=o[d];if(Array.isArray(f)){if(d in a.arrayKeywords)for(var p=0;p<f.length;p++)e(t,r,i,f[p],s+"/"+d+"/"+p,n,s,d,o,p)}else if(d in a.propsKeywords){if(f&&"object"==typeof f)for(var m in f)e(t,r,i,f[m],s+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),n,s,d,o,m)}else(d in a.keywords||t.allKeys&&!(d in a.skipKeywords))&&e(t,r,i,f,s+"/"+d,n,s,d,o)}i(o,s,n,c,l,u,h)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};a.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},a.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},a.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},a.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var a=e.exports=function(){this._cache={}};a.prototype.put=function(e,t){this._cache[e]=t},a.prototype.get=function(e){return this._cache[e]},a.prototype.del=function(e){delete this._cache[e]},a.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var a=r(5),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,n=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,f=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",a.copy(m[e])}function v(e){var t=e.match(i);if(!t)return!1;var r=+t[1],a=+t[2],s=+t[3];return a>=1&&a<=12&&s>=1&&s<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[a])}function g(e,t){var r=e.match(s);if(!r)return!1;var a=r[1],i=r[2],o=r[3],n=r[5];return(a<=23&&i<=59&&o<=59||23==a&&59==i&&60==o)&&(!t||n)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:E,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":f,"relative-json-pointer":p},m.full={date:v,time:g,"date-time":function(e){var t=e.split(y);return 2==t.length&&v(t[0])&&g(t[1],!0)},uri:function(e){return P.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&n.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:E,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":f,"relative-json-pointer":p};var y=/t|\s/i;var P=/\/|:/;var w=/[^\\]\\Z/;function E(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var a=r(33),i=r(5).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var i;if("object"==typeof r){var o=Object.keys(r)[0];i=r[o],r=o,i.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:a[r],implements:i}})),e.all.$comment={keyword:"$comment",code:a.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(34),allOf:r(35),anyOf:r(36),$comment:r(37),const:r(38),contains:r(39),dependencies:r(40),enum:r(41),format:r(42),if:r(43),items:r(44),maximum:r(15),minimum:r(15),maxItems:r(16),minItems:r(16),maxLength:r(17),minLength:r(17),maxProperties:r(18),minProperties:r(18),multipleOf:r(45),not:r(46),oneOf:r(47),pattern:r(48),properties:r(49),propertyNames:r(50),required:r(51),uniqueItems:r(52),validate:r(14)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i,o=" ",s=e.level,n=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(n||""),d="valid"+s;if("#"==c||"#/"==c)e.isRoot?(a=e.async,i="validate"):(a=!0===e.root.schema.$async,i="root.refVal[0]");else{var f=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===f){var p=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(p),(y=y||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var m=o;o=y.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,p);e.logger.warn(p),u&&(o+=" if (true) { ")}}else if(f.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=f.schema,v.schemaPath="",v.errSchemaPath=c,o+=" "+e.validate(v).replace(/validate\.schema/g,f.code)+" ",u&&(o+=" if ("+g+") { ")}else a=!0===f.$async||e.async&&!1!==f.$async,i=f.code}if(i){var y;(y=y||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+h+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var P=o+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(o=y.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+d+"; "),o+=" try { await "+P+"; ",u&&(o+=" "+d+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+d+" = false; "),o+=" } ",u&&(o+=" if ("+d+") { ")}else o+=" if (!"+P+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,n=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,h=c.baseId,d=!0,f=i;if(f)for(var p,m=-1,v=f.length-1;m<v;)p=f[m+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all))&&(d=!1,c.schema=p,c.schemaPath=o+"["+m+"]",c.errSchemaPath=s+"/"+m,a+="  "+e.validate(c)+" ",c.baseId=h,n&&(a+=" if ("+u+") { ",l+="}"));return n&&(a+=d?" if (true) { ":" "+l.slice(0,-1)+" "),a=e.util.cleanUpCode(a)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d="errs__"+i,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level;if(s.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=f.baseId;a+=" var "+d+" = errors; var "+h+" = false;  ";var g=e.compositeRule;e.compositeRule=f.compositeRule=!0;var y=s;if(y)for(var P,w=-1,E=y.length-1;w<E;)P=y[w+=1],f.schema=P,f.schemaPath=n+"["+w+"]",f.errSchemaPath=c+"/"+w,a+="  "+e.validate(f)+" ",f.baseId=v,a+=" "+h+" = "+h+" || "+m+"; if (!"+h+") { ",p+="}";e.compositeRule=f.compositeRule=g,a+=" "+p+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}else l&&(a+=" if (true) { ");return a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?a+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+s+", "+e.util.toQuotedString(o)+", validate.root.schema);"),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d=e.opts.$data&&s&&s.$data;d&&(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; "),d||(a+=" var schema"+i+" = validate.schema"+n+";"),a+="var "+h+" = equal("+u+", schema"+i+"); if (!"+h+") {   ";var f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var p=a;return a=f.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",l&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d="errs__"+i,f=e.util.copy(e);f.level++;var p="valid"+f.level,m="i"+i,v=f.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,P=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all);if(a+="var "+d+" = errors;var "+h+";",P){var w=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=s,f.schemaPath=n,f.errSchemaPath=c,a+=" var "+p+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var E=u+"["+m+"]";f.dataPathArr[v]=m;var C=e.validate(f);f.baseId=y,e.util.varOccurences(C,g)<2?a+=" "+e.util.varReplace(C,g,E)+" ":a+=" var "+g+" = "+E+"; "+C+" ",a+=" if ("+p+") break; }  ",e.compositeRule=f.compositeRule=w,a+="  if (!"+p+") {"}else a+=" if ("+u+".length == 0) {";var _=_||[];_.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var b=a;return a=_.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+b+"]); ":a+=" validate.errors = ["+b+"]; return false; ":a+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",P&&(a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,d=e.util.copy(e),f="";d.level++;var p="valid"+d.level,m={},v={},g=e.opts.ownProperties;for(E in s){var y=s[E],P=Array.isArray(y)?v:m;P[E]=y}a+="var "+h+" = errors;";var w=e.errorPath;for(var E in a+="var missing"+i+";",v)if((P=v[E]).length){if(a+=" if ( "+u+e.util.getProperty(E)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(E)+"') "),l){a+=" && ( ";var C=P;if(C)for(var _=-1,b=C.length-1;_<b;){R=C[_+=1],_&&(a+=" || "),a+=" ( ( "+(O=u+(A=e.util.getProperty(R)))+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:A)+") ) "}a+=")) {  ";var S="missing"+i,j="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,S,!0):w+" + "+S);var x=x||[];x.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+j+"', depsCount: "+P.length+", deps: '"+e.util.escapeQuotes(1==P.length?P[0]:P.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==P.length?a+="property "+e.util.escapeQuotes(P[0]):a+="properties "+e.util.escapeQuotes(P.join(", ")),a+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var k=a;a=x.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+k+"]); ":a+=" validate.errors = ["+k+"]; return false; ":a+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var D=P;if(D)for(var R,F=-1,I=D.length-1;F<I;){R=D[F+=1];var A=e.util.getProperty(R),O=(j=e.util.escapeQuotes(R),u+A);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,R,e.opts.jsonPointers)),a+=" if ( "+O+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+j+"', depsCount: "+P.length+", deps: '"+e.util.escapeQuotes(1==P.length?P[0]:P.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==P.length?a+="property "+e.util.escapeQuotes(P[0]):a+="properties "+e.util.escapeQuotes(P.join(", ")),a+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",l&&(f+="}",a+=" else { ")}e.errorPath=w;var $=d.baseId;for(var E in m){y=m[E];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(a+=" "+p+" = true; if ( "+u+e.util.getProperty(E)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(E)+"') "),a+=") { ",d.schema=y,d.schemaPath=n+e.util.getProperty(E),d.errSchemaPath=c+"/"+e.util.escapeFragment(E),a+="  "+e.validate(d)+" ",d.baseId=$,a+=" }  ",l&&(a+=" if ("+p+") { ",f+="}"))}return l&&(a+="   "+f+" if ("+h+" == errors) {"),a=e.util.cleanUpCode(a)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d=e.opts.$data&&s&&s.$data;d&&(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var f="i"+i,p="schema"+i;d||(a+=" var "+p+" = validate.schema"+n+";"),a+="var "+h+";",d&&(a+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),a+=h+" = false;for (var "+f+"=0; "+f+"<"+p+".length; "+f+"++) if (equal("+u+", "+p+"["+f+"])) { "+h+" = true; break; }",d&&(a+="  }  "),a+=" if (!"+h+") {   ";var m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=m.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",l&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return l&&(a+=" if (true) { "),a;var h,d=e.opts.$data&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=s;var f=e.opts.unknownFormats,p=Array.isArray(f);if(d){a+=" var "+(m="format"+i)+" = formats["+h+"]; var "+(v="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(g="formatType"+i)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+i+" = "+m+".async; "),a+=" "+m+" = "+m+".validate; } if (  ",d&&(a+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),a+=" (","ignore"!=f&&(a+=" ("+h+" && !"+m+" ",p&&(a+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),a+=") || "),a+=" ("+m+" && "+g+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?a+=" (async"+i+" ? await "+m+"("+u+") : "+m+"("+u+")) ":a+=" "+m+"("+u+") ",a+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[s])){if("ignore"==f)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(a+=" if (true) { "),a;if(p&&f.indexOf(s)>=0)return l&&(a+=" if (true) { "),a;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var y=!0===m.async;m=m.validate}if(g!=r)return l&&(a+=" if (true) { "),a;if(y){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(P="formats"+e.util.getProperty(s)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var P="formats"+e.util.getProperty(s);v&&(P+=".validate"),a+="function"==typeof m?" "+P+"("+u+") ":" "+P+".test("+u+") ",a+=") { "}}var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",a+=d?""+h:""+e.util.toQuotedString(s),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=d?"' + "+h+" + '":""+e.util.escapeQuotes(s),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+e.util.toQuotedString(s),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;return a=w.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d="errs__"+i,f=e.util.copy(e);f.level++;var p="valid"+f.level,m=e.schema.then,v=e.schema.else,g=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),y=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),P=f.baseId;if(g||y){var w;f.createErrors=!1,f.schema=s,f.schemaPath=n,f.errSchemaPath=c,a+=" var "+d+" = errors; var "+h+" = true;  ";var E=e.compositeRule;e.compositeRule=f.compositeRule=!0,a+="  "+e.validate(f)+" ",f.baseId=P,f.createErrors=!0,a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=E,g?(a+=" if ("+p+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(f)+" ",f.baseId=P,a+=" "+h+" = "+p+"; ",g&&y?a+=" var "+(w="ifClause"+i)+" = 'then'; ":w="'then'",a+=" } ",y&&(a+=" else { ")):a+=" if (!"+p+") { ",y&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(f)+" ",f.baseId=P,a+=" "+h+" = "+p+"; ",g&&y?a+=" var "+(w="ifClause"+i)+" = 'else'; ":w="'else'",a+=" } "),a+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",l&&(a+=" else { "),a=e.util.cleanUpCode(a)}else l&&(a+=" if (true) { ");return a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d="errs__"+i,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,v="i"+i,g=f.dataLevel=e.dataLevel+1,y="data"+g,P=e.baseId;if(a+="var "+d+" = errors;var "+h+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){a+=" "+h+" = "+u+".length <= "+s.length+"; ";var E=c;c=e.errSchemaPath+"/additionalItems",a+="  if (!"+h+") {   ";var C=C||[];C.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var _=a;a=C.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c=E,l&&(p+="}",a+=" else { ")}var b=s;if(b)for(var S,j=-1,x=b.length-1;j<x;)if(S=b[j+=1],e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0:e.util.schemaHasRules(S,e.RULES.all)){a+=" "+m+" = true; if ("+u+".length > "+j+") { ";var k=u+"["+j+"]";f.schema=S,f.schemaPath=n+"["+j+"]",f.errSchemaPath=c+"/"+j,f.errorPath=e.util.getPathExpr(e.errorPath,j,e.opts.jsonPointers,!0),f.dataPathArr[g]=j;var D=e.validate(f);f.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,k)+" ":a+=" var "+y+" = "+k+"; "+D+" ",a+=" }  ",l&&(a+=" if ("+m+") { ",p+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))){f.schema=w,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+m+" = true; if ("+u+".length > "+s.length+") {  for (var "+v+" = "+s.length+"; "+v+" < "+u+".length; "+v+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);k=u+"["+v+"]";f.dataPathArr[g]=v;D=e.validate(f);f.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,k)+" ":a+=" var "+y+" = "+k+"; "+D+" ",l&&(a+=" if (!"+m+") break; "),a+=" } }  ",l&&(a+=" if ("+m+") { ",p+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){f.schema=s,f.schemaPath=n,f.errSchemaPath=c,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);k=u+"["+v+"]";f.dataPathArr[g]=v;D=e.validate(f);f.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,k)+" ":a+=" var "+y+" = "+k+"; "+D+" ",l&&(a+=" if (!"+m+") break; "),a+=" }"}return l&&(a+=" "+p+" if ("+d+" == errors) {"),a=e.util.cleanUpCode(a)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d=e.opts.$data&&n&&n.$data;d?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n,i+="var division"+o+";if (",d&&(i+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),i+=" (division"+o+" = "+h+" / "+a+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",d&&(i+="  )  "),i+=" ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=d?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+n,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,d=e.util.copy(e);d.level++;var f="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=n,d.errSchemaPath=c,a+=" var "+h+" = errors;  ";var p,m=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(p=d.opts.allErrors,d.opts.allErrors=!1),a+=" "+e.validate(d)+" ",d.createErrors=!0,p&&(d.opts.allErrors=p),e.compositeRule=d.compositeRule=m,a+=" if ("+f+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var g=a;a=v.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ");return a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d="errs__"+i,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,v=f.baseId,g="prevValid"+i,y="passingSchemas"+i;a+="var "+d+" = errors , "+g+" = false , "+h+" = false , "+y+" = null; ";var P=e.compositeRule;e.compositeRule=f.compositeRule=!0;var w=s;if(w)for(var E,C=-1,_=w.length-1;C<_;)E=w[C+=1],(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0:e.util.schemaHasRules(E,e.RULES.all))?(f.schema=E,f.schemaPath=n+"["+C+"]",f.errSchemaPath=c+"/"+C,a+="  "+e.validate(f)+" ",f.baseId=v):a+=" var "+m+" = true; ",C&&(a+=" if ("+m+" && "+g+") { "+h+" = false; "+y+" = ["+y+", "+C+"]; } else { ",p+="}"),a+=" if ("+m+") { "+h+" = "+g+" = true; "+y+" = "+C+"; }";return e.compositeRule=f.compositeRule=P,a+=p+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d=e.opts.$data&&n&&n.$data;d?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n,i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),i+=" !"+(d?"(new RegExp("+a+"))":e.usePattern(n))+".test("+h+") ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",i+=d?""+a:""+e.util.toQuotedString(n),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=d?"' + "+a+" + '":""+e.util.escapeQuotes(n),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+e.util.toQuotedString(n),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,d=e.util.copy(e),f="";d.level++;var p="valid"+d.level,m="key"+i,v="idx"+i,g=d.dataLevel=e.dataLevel+1,y="data"+g,P="dataProperties"+i,w=Object.keys(s||{}),E=e.schema.patternProperties||{},C=Object.keys(E),_=e.schema.additionalProperties,b=w.length||C.length,S=!1===_,j="object"==typeof _&&Object.keys(_).length,x=e.opts.removeAdditional,k=S||j||x,D=e.opts.ownProperties,R=e.baseId,F=e.schema.required;if(F&&(!e.opts.$data||!F.$data)&&F.length<e.opts.loopRequired)var I=e.util.toHash(F);if(a+="var "+h+" = errors;var "+p+" = true;",D&&(a+=" var "+P+" = undefined;"),k){if(a+=D?" "+P+" = "+P+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+P+".length; "+v+"++) { var "+m+" = "+P+"["+v+"]; ":" for (var "+m+" in "+u+") { ",b){if(a+=" var isAdditional"+i+" = !(false ",w.length)if(w.length>8)a+=" || validate.schema"+n+".hasOwnProperty("+m+") ";else{var A=w;if(A)for(var O=-1,$=A.length-1;O<$;)H=A[O+=1],a+=" || "+m+" == "+e.util.toQuotedString(H)+" "}if(C.length){var T=C;if(T)for(var M=-1,N=T.length-1;M<N;)ie=T[M+=1],a+=" || "+e.usePattern(ie)+".test("+m+") "}a+=" ); if (isAdditional"+i+") { "}if("all"==x)a+=" delete "+u+"["+m+"]; ";else{var L=e.errorPath,U="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),S)if(x)a+=" delete "+u+"["+m+"]; ";else{a+=" "+p+" = false; ";var B=c;c=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var V=a;a=te.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+V+"]); ":a+=" validate.errors = ["+V+"]; return false; ":a+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=B,l&&(a+=" break; ")}else if(j)if("failing"==x){a+=" var "+h+" = errors;  ";var z=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=_,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var q=u+"["+m+"]";d.dataPathArr[g]=m;var G=e.validate(d);d.baseId=R,e.util.varOccurences(G,y)<2?a+=" "+e.util.varReplace(G,y,q)+" ":a+=" var "+y+" = "+q+"; "+G+" ",a+=" if (!"+p+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=d.compositeRule=z}else{d.schema=_,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);q=u+"["+m+"]";d.dataPathArr[g]=m;G=e.validate(d);d.baseId=R,e.util.varOccurences(G,y)<2?a+=" "+e.util.varReplace(G,y,q)+" ":a+=" var "+y+" = "+q+"; "+G+" ",l&&(a+=" if (!"+p+") break; ")}e.errorPath=L}b&&(a+=" } "),a+=" }  ",l&&(a+=" if ("+p+") { ",f+="}")}var Q=e.opts.useDefaults&&!e.compositeRule;if(w.length){var K=w;if(K)for(var H,W=-1,X=K.length-1;W<X;){var Y=s[H=K[W+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){var J=e.util.getProperty(H),Z=(q=u+J,Q&&void 0!==Y.default);d.schema=Y,d.schemaPath=n+J,d.errSchemaPath=c+"/"+e.util.escapeFragment(H),d.errorPath=e.util.getPath(e.errorPath,H,e.opts.jsonPointers),d.dataPathArr[g]=e.util.toQuotedString(H);G=e.validate(d);if(d.baseId=R,e.util.varOccurences(G,y)<2){G=e.util.varReplace(G,y,q);var ee=q}else{ee=y;a+=" var "+y+" = "+q+"; "}if(Z)a+=" "+G+" ";else{if(I&&I[H]){a+=" if ( "+ee+" === undefined ",D&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(H)+"') "),a+=") { "+p+" = false; ";L=e.errorPath,B=c;var te,re=e.util.escapeQuotes(H);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,H,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+re+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";V=a;a=te.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+V+"]); ":a+=" validate.errors = ["+V+"]; return false; ":a+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=B,e.errorPath=L,a+=" } else { "}else l?(a+=" if ( "+ee+" === undefined ",D&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(H)+"') "),a+=") { "+p+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",D&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(H)+"') "),a+=" ) { ");a+=" "+G+" } "}}l&&(a+=" if ("+p+") { ",f+="}")}}if(C.length){var ae=C;if(ae)for(var ie,oe=-1,se=ae.length-1;oe<se;){Y=E[ie=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){d.schema=Y,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),a+=D?" "+P+" = "+P+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+P+".length; "+v+"++) { var "+m+" = "+P+"["+v+"]; ":" for (var "+m+" in "+u+") { ",a+=" if ("+e.usePattern(ie)+".test("+m+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);q=u+"["+m+"]";d.dataPathArr[g]=m;G=e.validate(d);d.baseId=R,e.util.varOccurences(G,y)<2?a+=" "+e.util.varReplace(G,y,q)+" ":a+=" var "+y+" = "+q+"; "+G+" ",l&&(a+=" if (!"+p+") break; "),a+=" } ",l&&(a+=" else "+p+" = true; "),a+=" }  ",l&&(a+=" if ("+p+") { ",f+="}")}}}return l&&(a+=" "+f+" if ("+h+" == errors) {"),a=e.util.cleanUpCode(a)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,d=e.util.copy(e);d.level++;var f="valid"+d.level;if(a+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=n,d.errSchemaPath=c;var p="key"+i,m="idx"+i,v="i"+i,g="' + "+p+" + '",y="data"+(d.dataLevel=e.dataLevel+1),P="dataProperties"+i,w=e.opts.ownProperties,E=e.baseId;w&&(a+=" var "+P+" = undefined; "),a+=w?" "+P+" = "+P+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+P+".length; "+m+"++) { var "+p+" = "+P+"["+m+"]; ":" for (var "+p+" in "+u+") { ",a+=" var startErrs"+i+" = errors; ";var C=p,_=e.compositeRule;e.compositeRule=d.compositeRule=!0;var b=e.validate(d);d.baseId=E,e.util.varOccurences(b,y)<2?a+=" "+e.util.varReplace(b,y,C)+" ":a+=" var "+y+" = "+C+"; "+b+" ",e.compositeRule=d.compositeRule=_,a+=" if (!"+f+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),l&&(a+=" break; "),a+=" } }"}return l&&(a+="  if ("+h+" == errors) {"),a=e.util.cleanUpCode(a)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,d=e.opts.$data&&s&&s.$data;d&&(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var f="schema"+i;if(!d)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=s;if(m)for(var v,g=-1,y=m.length-1;g<y;){v=m[g+=1];var P=e.schema.properties[v];P&&(e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0:e.util.schemaHasRules(P,e.RULES.all))||(p[p.length]=v)}}else p=s;if(d||p.length){var w=e.errorPath,E=d||p.length>=e.opts.loopRequired,C=e.opts.ownProperties;if(l)if(a+=" var missing"+i+"; ",E){d||(a+=" var "+f+" = validate.schema"+n+"; ");var _="' + "+(D="schema"+i+"["+(j="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,D,e.opts.jsonPointers)),a+=" var "+h+" = true; ",d&&(a+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),a+=" for (var "+j+" = 0; "+j+" < "+f+".length; "+j+"++) { "+h+" = "+u+"["+f+"["+j+"]] !== undefined ",C&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+f+"["+j+"]) "),a+="; if (!"+h+") break; } ",d&&(a+="  }  "),a+="  if (!"+h+") {   ",(k=k||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+_+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var b=a;a=k.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+b+"]); ":a+=" validate.errors = ["+b+"]; return false; ":a+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var S=p;if(S)for(var j=-1,x=S.length-1;j<x;){F=S[j+=1],j&&(a+=" || "),a+=" ( ( "+($=u+(O=e.util.getProperty(F)))+" === undefined ",C&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:O)+") ) "}a+=") {  ";var k;_="' + "+(D="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,D,!0):w+" + "+D),(k=k||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+_+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";b=a;a=k.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+b+"]); ":a+=" validate.errors = ["+b+"]; return false; ":a+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(E){d||(a+=" var "+f+" = validate.schema"+n+"; ");var D;_="' + "+(D="schema"+i+"["+(j="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,D,e.opts.jsonPointers)),d&&(a+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+_+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),a+=" for (var "+j+" = 0; "+j+" < "+f+".length; "+j+"++) { if ("+u+"["+f+"["+j+"]] === undefined ",C&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+f+"["+j+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+_+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(a+="  }  ")}else{var R=p;if(R)for(var F,I=-1,A=R.length-1;I<A;){F=R[I+=1];var O=e.util.getProperty(F),$=(_=e.util.escapeQuotes(F),u+O);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,F,e.opts.jsonPointers)),a+=" if ( "+$+" === undefined ",C&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+_+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else l&&(a+=" if (true) {");return a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),d="valid"+o,f=e.opts.$data&&n&&n.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n,(n||f)&&!1!==e.opts.uniqueItems){f&&(i+=" var "+d+"; if ("+a+" === false || "+a+" === undefined) "+d+" = true; else if (typeof "+a+" != 'boolean') "+d+" = false; else { "),i+=" var i = "+h+".length , "+d+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,m=Array.isArray(p);if(!p||"object"==p||"array"==p||m&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+d+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var v="checkDataType"+(m?"s":"");i+=" if ("+e.util[v](p,"item",!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",f&&(i+="  }  "),i+=" if (!"+d+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+n,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var y=i;i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}},function(e,t,r){"use strict";var a=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,o=t[r].split("/"),s=e;for(i=1;i<o.length;i++)s=s[o[i]];for(i=0;i<a.length;i++){var n=a[i],c=s[n];c&&(s[n]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var a=r(9).MissingRef;e.exports=function e(t,r,i){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var s=n(t).then((function(){var e=o._addSchema(t,void 0,r);return e.validate||function e(t){try{return o._compile(t)}catch(i){if(i instanceof a)return function(a){var i=a.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+a.missingRef+" cannot be resolved");var s=o._loadingSchemas[i];s||(s=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(c,c);return s.then((function(e){if(!l(i))return n(e).then((function(){l(i)||o.addSchema(e,i,void 0,r)}))})).then((function(){return e(t)}));function c(){delete o._loadingSchemas[i]}function l(e){return o._refs[e]||o._schemas[e]}}(i);throw i}}(e)}));i&&s.then((function(e){i(null,e)}),i);return s;function n(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var a=/^[a-z_$][a-z0-9_$-]*$/i,i=r(56),o=r(57);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!a.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var s=0;s<o.length;s++)c(e,o[s],t);else c(e,o,t);var n=t.metaSchema;n&&(t.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(n,!0))}function c(e,t,a){for(var o,s=0;s<r.length;s++){var n=r[s];if(n.type==t){o=n;break}}o||(o={type:t,rules:[]},r.push(o));var c={keyword:e,definition:a,custom:!0,code:i,implements:a.implements};o.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,i=0;i<a.length;i++)if(a[i].keyword==e){a.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var a,i,o=" ",s=e.level,n=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,d="data"+(n||""),f="valid"+s,p="errs__"+s,m=e.opts.$data&&c&&c.$data;m?(o+=" var schema"+s+" = "+e.util.getData(c.$data,n,e.dataPathArr)+"; ",i="schema"+s):i=c;var v,g,y,P,w,E="definition"+s,C=this.definition,_="";if(m&&C.$data){w="keywordValidate"+s;var b=C.validateSchema;o+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+w+" = "+E+".validate;"}else{if(!(P=e.useCustomRule(this,c,e.schema,e)))return;i="validate.schema"+l,w=P.code,v=C.compile,g=C.inline,y=C.macro}var S=w+".errors",j="i"+s,x="ruleErr"+s,k=C.async;if(k&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(o+=S+" = null;"),o+="var "+p+" = errors;var "+f+";",m&&C.$data&&(_+="}",o+=" if ("+i+" === undefined) { "+f+" = true; } else { ",b&&(_+="}",o+=" "+f+" = "+E+".validateSchema("+i+"); if ("+f+") { ")),g)C.statements?o+=" "+P.validate+" ":o+=" "+f+" = "+P.validate+"; ";else if(y){var D=e.util.copy(e);_="";D.level++;var R="valid"+D.level;D.schema=P.validate,D.schemaPath="";var F=e.compositeRule;e.compositeRule=D.compositeRule=!0;var I=e.validate(D).replace(/validate\.schema/g,w);e.compositeRule=D.compositeRule=F,o+=" "+I}else{(T=T||[]).push(o),o="",o+="  "+w+".call( ",e.opts.passContext?o+="this":o+="self",v||!1===C.schema?o+=" , "+d+" ":o+=" , "+i+" , "+d+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var A=n?"data"+(n-1||""):"parentData",O=n?e.dataPathArr[n]:"parentDataProperty",$=o+=" , "+A+" , "+O+" , rootData )  ";o=T.pop(),!1===C.errors?(o+=" "+f+" = ",k&&(o+="await "),o+=$+"; "):o+=k?" var "+(S="customErrors"+s)+" = null; try { "+f+" = await "+$+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+S+" = e.errors; else throw e; } ":" "+S+" = null; "+f+" = "+$+"; "}if(C.modifying&&(o+=" if ("+A+") "+d+" = "+A+"["+O+"];"),o+=""+_,C.valid)h&&(o+=" if (true) { ");else{var T;o+=" if ( ",void 0===C.valid?(o+=" !",o+=y?""+R:""+f):o+=" "+!C.valid+" ",o+=") { ",a=this.keyword,(T=T||[]).push(o),o="",(T=T||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var M=o;o=T.pop(),!e.compositeRule&&h?e.async?o+=" throw new ValidationError(["+M+"]); ":o+=" validate.errors = ["+M+"]; return false; ":o+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var N=o;o=T.pop(),g?C.errors?"full"!=C.errors&&(o+="  for (var "+j+"="+p+"; "+j+"<errors; "+j+"++) { var "+x+" = vErrors["+j+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+x+".schema = "+i+"; "+x+".data = "+d+"; "),o+=" } "):!1===C.errors?o+=" "+N+" ":(o+=" if ("+p+" == errors) { "+N+" } else {  for (var "+j+"="+p+"; "+j+"<errors; "+j+"++) { var "+x+" = vErrors["+j+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+x+".schema = "+i+"; "+x+".data = "+d+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===C.errors?o+=" "+N+" ":(o+=" if (Array.isArray("+S+")) { if (vErrors === null) vErrors = "+S+"; else vErrors = vErrors.concat("+S+"); errors = vErrors.length;  for (var "+j+"="+p+"; "+j+"<errors; "+j+"++) { var "+x+" = vErrors["+j+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+";  "+x+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+x+".schema = "+i+"; "+x+".data = "+d+"; "),o+=" } } else { "+N+" } "),o+=" } ",h&&(o+=" else { ")}return o}},function(e,t,r){"use strict";var a=r(19);e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:a.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:a.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e,t,r){"use strict";r.r(t);var a=r(0),i=r(1),o=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};function s(e,t){return o(this,void 0,void 0,(function*(){let r=a.window.createQuickPick();return r.items=e,r.activeItems=t?[t]:[],r.show(),new Promise(e=>{r.onDidChangeSelection(t=>{const a=t[0];a&&(e(a),r.hide())}),r.onDidChangeValue(e=>{!t||e||1===r.activeItems.length&&r.activeItems[0]===t||(r.activeItems=[t])}),r.onDidAccept(()=>{const t=r.activeItems[0];t&&(e(t),r.hide())}),r.onDidHide(()=>{e(void 0),r.dispose()})})}))}function n(e,t){return o(this,void 0,void 0,(function*(){let r=e.map(e=>({client:e,label:e.name,description:e.sourceUri.fsPath})),a=yield s(r,r.find(e=>e.client===t));return a?a.client:void 0}))}function c(e,t){return o(this,void 0,void 0,(function*(){let r=e.map(e=>({context:e,label:e.project.name,description:e.client.name})),a=yield s(r,r.find(e=>e.context===t));if(a)return a.context}))}function l(e){return o(this,void 0,void 0,(function*(){let t=e.client.projectTargets.map(e=>({target:e,label:e.name,description:e.type})),r=yield s(t,t.find(t=>t.target===e.client.target));if(r)return r.target}))}class u{constructor(e){this.projectDependencies=new Map,this.targetDependencies=new Map;for(const t of e){let e=Object.assign(Object.assign({},t),{parrent:void 0,children:[]});this.setSpecification(e)}for(const t of e)for(const e of t.dependencies){let r=this.getSpecification(e);r||(r=Object.assign(Object.assign({},e),{parrent:void 0,children:[]}),this.setSpecification(r));let a=this.getSpecification(t);a.children.push(r),r.parrent=a}}getSpecification(e,t){if(!e.target)return this.projectDependencies.get(e.project);{let r=this.targetDependencies.get(e.project);if(r)return r.get(e.target);if(t)return this.projectDependencies.get(e.project)}}setSpecification(e){if(e.target){let t=this.targetDependencies.get(e.project);t||(t=new Map,this.targetDependencies.set(e.project,t)),t.set(e.target,e)}else this.projectDependencies.set(e.project,e)}resolve(e){let t,r=[],a=[],i=new Set;t=new Set;let o=[];if(Array.isArray(e))e.forEach(e=>{let t=this.getSpecification(e,!0);t?o.push(t):(a.find(t=>t.project===e.project)&&(r.push(a),a=[]),a.push(e))}),r.push(a);else{let t=this.getSpecification(e,!0);t?o.push(t):(a.find(t=>t.project===e.project)&&(r.push(a),a=[]),a.push(e))}for(;o.length>0;){let e=o.pop();t.add(e),o.push(...e.children)}if(0===t.size)return r.push(a),r;for(;t.size>0;){let e=!0;for(const o of t.values())(0===o.children.length||o.children.reduce((e,t)=>e&&i.has(t),!0))&&(t.delete(o),i.add(o),a.find(e=>e.project===o.project)&&(r.push(a),a=[]),a.push(o),e=!1);if(e)throw new Error("Circular dependency detected while resolving dependencies.");r.push(a),a=[]}return r}}var h=r(4),d=r(3),f=r(2),p=r(20),m=r.n(p);class v{constructor(e){e&&(this.windowsSdkVersion=e.windowsSdkVersion,this.cCompiler=e.cCompiler,this.cppCompiler=e.cppCompiler)}getCompiler(e){return"C"===e?this.cCompiler:"CXX"===e?this.cppCompiler:void 0}}var g=r(21),y=r.n(g),P=r(22);const w=(e,t)=>typeof e==typeof t&&("object"==typeof e?e instanceof Array?t instanceof Array&&((e,t)=>{if(e.length!=t.length)return!1;for(const r in e)if(!w(e[r],t[r]))return!1;return!0})(e,t):((e,t)=>{let r=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(e);if(r.length!=a.length)return!1;for(const a of r)if(!w(e[a],t[a]))return!1;return!0})(e,t):e===t);var E=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const C=Object(f.promisify)(d.lstat),_=Object(f.promisify)(d.open),b=Object(f.promisify)(d.write),S=Object(f.promisify)(d.readFile);class j{constructor(e,t,r){let a=Object.assign(Object.assign({},r),t);this.name=e,this.buildType=a.buildType,this.buildDirectory=a.buildDirectory,this.generator=a.generator,this.extraGenerator=a.extraGenerator,this.toolchain=a.toolchain,this.cacheEntries=a.cacheEntries,this.env=a.env}resolve(e){const t=/(?<=(?:^|[^\$]))\${((?:\w+\:)?\w+)}/g,r=/\$(\${(?:\w+\:)?\w+})/g;e.set("name",this.name),e.set("generator",this.generator),e.set("buildType",this.buildType);let a=a=>{if(!a)return a;let i=a.replace(t,(t,...r)=>e.get(r[0])||"");return i=i.replace(r,(e,...t)=>t[0])};for(const t in process.env)e.set(`env:${t}`,process.env[t]);let o={};for(let t in this.env){let r=a(this.env[t]);e.set("env:"+t,r),o[t]=r}let s=a(this.buildDirectory);s&&(i.isAbsolute(s)||(s=i.join(e.get("workspaceFolder"),s)),s=i.normalize(s));let n=this.toolchain;this.toolchain&&"string"==typeof this.toolchain&&(n=a(this.toolchain));let c=[];if(this.cacheEntries)for(let e of this.cacheEntries)c.push({name:e.name,type:e.type,value:a(e.value)});this.buildDirectory=s,this.toolchain=n,this.env=o,this.cacheEntries=c}mustRegenerateBuildDirectory(e){return!w(this.toolchain,e.toolchain)||this.generator!==e.generator||this.buildDirectory!==e.buildDirectory}mustRemoveBuildDirectory(e){return(!w(this.toolchain,e.toolchain)||this.generator!==e.generator)&&this.buildDirectory===e.buildDirectory}equals(e){return!(this.name!==e.name||this.buildDirectory!==e.buildDirectory||this.buildType!==e.buildType||this.generator!==e.generator||this.description!==e.description)&&(!!w(this.toolchain,e.toolchain)&&(!!w(this.env,e.env)&&!!w(this.cacheEntries,e.cacheEntries)))}}function x(){return["Debug","Release","RelWithDebInfo","MinSizeRel"].map(e=>({name:e,buildType:e}))}function k(e,t){return E(this,void 0,void 0,(function*(){if(t.toolchain&&"object"==typeof t.toolchain){let r=yield _(e,"w");for(const e in t.toolchain)yield b(r,"set("+e+" "+t.toolchain[e]+")\n",void 0,"utf-8")}}))}const D=(new y.a).compile(P);class R extends Error{constructor(e){super(),this.message=e.map(e=>e.dataPath+": "+e.message).join(" ")}}var F=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const I=f.promisify(d.readdir),A=f.promisify(d.stat),O=f.promisify(d.lstat),$=f.promisify(d.unlink),T=f.promisify(d.mkdir),M=f.promisify(d.rmdir);function N(e){return F(this,void 0,void 0,(function*(){let t=e.split(i.sep),r=t[0],a=!1;i.isAbsolute(e)&&(r=""===t[0]?"/":t[0],t.shift());for(let e=0;e<t.length;e++){r=i.join(r,t[e]),(yield A(r).catch(e=>{if("ENOENT"!==e.code)throw e}))?a=!1:yield T(r).catch(e=>{if("EEXIST"!==e.code)throw e;a=!1}).then(()=>a=!0)}return a}))}function L(e,t){return i.isAbsolute(e)?e:i.resolve(t,e)}class U{constructor(e){this.buildPath=e,this._diagnostics=new Map}match(e){let t=e.match(U.regex);if(t){let e,r=new a.Range(new a.Position(parseInt(t[2])-1,0),new a.Position(parseInt(t[2]),0));"error"===t[3]?e=a.DiagnosticSeverity.Error:"warning"===t[3]&&(e=a.DiagnosticSeverity.Warning);let i=a.Uri.file(t[1].replace(/\\/g,"/"));this._diagnostics.has(i)||this._diagnostics.set(i,[]),this._diagnostics.get(i).push(new a.Diagnostic(r,t[5],e))}}getDiagnostics(){let e=[];for(let t of this._diagnostics.keys())e.push([t,this._diagnostics.get(t)]);return e}clear(){this._diagnostics.clear()}}U.regex=/^([\w/].+?)\((\d+)\): (error|warning) (.+?): (.+)\[.+\]$/;class B{constructor(e){this.buildPath=e,this._diagnostics=new Map}match(e){let t;if(t=e.match(B.DIAG_REGEX)){let e,r;e=new a.Range(new a.Position(parseInt(t[2])-1,parseInt(t[3])-1),new a.Position(parseInt(t[2]),0)),this._lastDiag&&0===this._lastDiag.range.start.compareTo(e.start)&&(e=this._lastDiag.range),"error"===t[4]?r=a.DiagnosticSeverity.Error:"warning"===t[4]?r=a.DiagnosticSeverity.Warning:"note"===t[4]&&(r=a.DiagnosticSeverity.Information);let o=t[1];i.isAbsolute(o)||(o=i.normalize(i.join(this.buildPath,o)));let s=a.Uri.file(o);this._diagnostics.has(s)||this._diagnostics.set(s,[]),this._lastDiag=new a.Diagnostic(e,t[5],r),this._includeInfo&&(this._lastDiag.relatedInformation=this._includeInfo,this._includeInfo=void 0),this._diagnostics.get(s).push(this._lastDiag)}if((t=e.match(B.RANGE_REGEX))&&this._lastDiag){let e=this._lastDiag.range.start.line;this._lastDiag.range=new a.Range(e,t[1].length,e,t[1].length+t[2].length-1)}if(t=e.match(B.INCLUDE_START_REGEX)){this._includeInfo=[];let e=t[1];i.isAbsolute(e)||(e=i.normalize(i.join(this.buildPath,e))),this._includeInfo.push(new a.DiagnosticRelatedInformation(new a.Location(a.Uri.file(e),new a.Range(parseInt(t[2])-1,0,parseInt(t[2]),0)),t[0]))}if((t=e.match(B.INCLUDE_REGEX))&&this._includeInfo){let e=t[1];i.isAbsolute(e)||(e=i.normalize(i.join(this.buildPath,e))),this._includeInfo.push(new a.DiagnosticRelatedInformation(new a.Location(a.Uri.file(e),new a.Range(parseInt(t[2])-1,0,parseInt(t[2]),0)),t[0]))}}getDiagnostics(){let e=[];for(let t of this._diagnostics.keys())e.push([t,this._diagnostics.get(t)]);return e}clear(){this._diagnostics.clear()}}B.DIAG_REGEX=/^([\.\w/].+?):(\d+):(\d+): (?:fatal )?(error|warning|note): (.+)$/,B.RANGE_REGEX=/^(\s*)((?:\~+\s*)?\^(?:\s*\~+)?)(\s*)$/,B.INCLUDE_START_REGEX=/^In file included from ([\.\w/].+?):(\d+)(?:\,|\:)$/,B.INCLUDE_REGEX=/^\s+from ([\.\w/].+?):(\d+)(?:\,|\:)$/;class V{constructor(e){this.buildPath=e,this._diagnostics=new Map,this._messages=[],this._stop=!1}match(e){let t;if(!this._stop){if(t=e.match(V.STOP_REGEX),this._stop=null!==t,t=e.match(V.MAIN_REGEX)){let e;this._lastDiag&&(this._lastDiag.message=this._messages.join("\n")),this._messages=[],e=new a.Range(new a.Position(parseInt(t[2])-1,0),new a.Position(parseInt(t[2]),0));let r=t[1];i.isAbsolute(r)||(r=i.normalize(i.join(this.buildPath,r)));let o=a.Uri.file(r);return this._diagnostics.has(o)||this._diagnostics.set(o,[]),this._lastDiag=new a.Diagnostic(e,"",a.DiagnosticSeverity.Error),void this._diagnostics.get(o).push(this._lastDiag)}void 0!==this._lastDiag&&(t=e.match(V.ADD_REGEX))&&this._messages.push(t[1])}}getDiagnostics(){let e=[];this._lastDiag&&(this._lastDiag.message=this._messages.join("\n"));for(let t of this._diagnostics.keys())e.push([t,this._diagnostics.get(t)]);return e}clear(){this._diagnostics.clear(),this._stop=!1}}V.MAIN_REGEX=/^CMake Error at (.+):(\d+)/,V.ADD_REGEX=/^  (.+)$/,V.STOP_REGEX=/^(?:--)? Generating done/;var z=r(23);class q extends z.Transform{constructor(){super(),this._value="",this.setEncoding("utf8")}_transform(e,t,r){e instanceof Buffer&&(this._value=this._value+e.toString("utf8")),"string"==typeof e&&(this._value=this._value+e);let a=this._value.split(/\r?\n/);for(let e=0;e<a.length-1;e++)this.push(a[e],"utf8");this._value=a[a.length-1],r()}_flush(e){this.push(this._value),e()}}var G=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const Q=f.promisify(h.exec),K=/^\w+ version (\d+\.\d+\.\d+)/;var H=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const W=/(".*?"|\S+)/g;function X(e,t){let r=[],i=a.workspace.getConfiguration("cmake",e).get(t,"").match(W);if(i)for(const e of i)r.push(e);return r}function Y(e){return H(this,void 0,void 0,(function*(){let t=yield function(){return G(this,void 0,void 0,(function*(){const e=a.workspace.getConfiguration("cmake").get("cmakePath","cmake");let t=(yield Q(`"${e}" --version`)).stdout.match(K);if(null===t)throw Error("Version string not found in output.");return t[1]}))}(),[r,i]=t.split(".",2).map(e=>parseInt(e)),o=a.workspace.getConfiguration("cmake",e).get("cmakeAPI");if(r>=3&&i>=14){if("Server"===o){if(r>3||i>15)throw Error(`CMake Server is unsupported in CMake version ${t}.`);return"Server"}return"File API"}if(r>=3&&i>=7){if("File API"===o)throw Error(`CMake File API is unsupported in CMake version ${t}.`);return"Server"}throw Error(`Unsupported CMake Version ${t}.`)}))}var J=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const Z=f.promisify(d.stat);class ee{constructor(){this.currentTargetName=""}}class te{constructor(){this.currentProjectName="",this.currentConfiguration="Debug",this.projectContexts={}}}class re{constructor(e,t,r){var o;this.sourceUri=e,this.workspaceFolder=t,this.extensionContext=r,this.disposables=[],this._onModelChange=new a.EventEmitter,this.onModelChange=this._onModelChange.event,this.isModelValid=!1,this._project=void 0,this._projectTargets=new Map,this._projects=[],this._targets=[],this._targetProject=new Map,this.cache=new Map,this._toolchain=new v,this.configChangeEvent=new a.EventEmitter,this.onDidChangeConfiguration=this.configChangeEvent.event,this._configs=x(),this.mustRemoveBuildDir=!1,this.mustRegenerateBuildDir=!1,this._cmakeMatcher=new V(this.sourcePath),this.sourcePath=this.sourceUri.fsPath.replace(/\\/g,"/").replace(/^\w\:\//,e=>e.toUpperCase()),this.clientContext=this.extensionContext.workspaceState.get(this.name+"-context",new te),this.configurationsFile=i.join(this.sourceUri.fsPath,".vscode","cmake_configurations.json"),this.console=a.window.createOutputChannel(`CMake - ${this.name}`),this.diagnostics=a.languages.createDiagnosticCollection("cmake-"+this.name),this.disposables.push(this.console,this.diagnostics),this.configFileWatcher=a.workspace.createFileSystemWatcher(new a.RelativePattern(t,".vscode/cmake_configurations.json")),this.configFileWatcher.onDidChange(()=>this.loadConfigurations()),this.configFileWatcher.onDidCreate(()=>this.loadConfigurations()),this.configFileWatcher.onDidDelete(()=>this.loadConfigurations()),this.disposables.push(this.configFileWatcher),this._originalConfig=this._configs.find(e=>e.name===this.clientContext.currentConfiguration)||this._configs[0],this._config=new j(this._originalConfig.name,this._originalConfig,this.defaultConfig),this._matchers=(o=this.buildDirectory,[new U(o),new B(o)]),this.disposables.push(a.workspace.onDidChangeConfiguration(this.handleConfigurationChange,this))}get name(){return i.basename(this.sourceUri.path)}hasConfigurationsFile(){return J(this,void 0,void 0,(function*(){try{return yield Z(this.configurationsFile),!0}catch(e){return!1}}))}get projects(){return this._projects}get project(){return this._project}set project(e){e&&this._projectTargets.has(e)?(this._project=e,this._target=this.projectTargets.find(e=>e.name===this.projectContext.currentTargetName)||this.projectTargets[0]):(this._project=void 0,this._target=void 0),this.updateContext()}get projectTargets(){return this.project?this.project.targets:[]}get targets(){return this._targets}get target(){return this._target}set target(e){e&&this._targetProject.has(e)?(this._target=e,this._project=this._targetProject.get(e)):this._target=void 0,this.updateContext()}getCacheValue(e){return this.cache.get(e)}get toolchain(){return this._toolchain}guessToolchain(){let e=(e,t)=>{t||(t=e);const r=this.configuration.toolchain;return"object"==typeof r&&r[t]?r[t]:this.cache.has(e)?this.cache.get(e).value:void 0};this._toolchain=new v({windowsSdkVersion:e("CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION","CMAKE_SYSTEM_VERSION"),cCompiler:e("CMAKE_C_COMPILER"),cppCompiler:e("CMAKE_CXX_COMPILER")})}get configurations(){return this._configs}get configuration(){return this._config}set configuration(e){const t=new j(e.name,e,this.defaultConfig);let r=new Map;r.set("workspaceFolder",this.workspaceFolder.uri.fsPath),r.set("sourceFolder",this.sourceUri.fsPath),t.resolve(r);const a=this._config;this._originalConfig=e,this._config=t,this.mustRemoveBuildDir=t.mustRemoveBuildDirectory(a),this.mustRegenerateBuildDir=t.mustRegenerateBuildDirectory(a)}configureConfigCheck(){return J(this,void 0,void 0,(function*(){this.mustRemoveBuildDir&&(this.removeBuildDirectory(),this.mustRemoveBuildDir=!1),this.mustRegenerateBuildDir&&(this.regenerateBuildDirectory(),this.mustRegenerateBuildDir=!1)}))}buildConfigCheck(){return J(this,void 0,void 0,(function*(){(this.mustRegenerateBuildDir||this.mustRemoveBuildDir)&&(yield this.configure())}))}get generator(){return this._config.generator}get extraGenerator(){return this._config.extraGenerator}get generatorString(){return this.extraGenerator?`${this.extraGenerator} - ${this.generator}`:this.generator}get buildDirectory(){return this._config.buildDirectory}get buildType(){return this._config.buildType}get toolchainFile(){return"string"==typeof this.configuration.toolchain||void 0===this.configuration.toolchain?this.configuration.toolchain?i.normalize(this.configuration.toolchain):void 0:i.join(this.workspaceFolder.uri.fsPath,this.configuration.name.toLowerCase().replace(/[^a-zA-Z0-9]/g,"_")+"_toolchain.cmake")}get environment(){return this._config.env}get cacheEntries(){return this._config.cacheEntries}get defaultConfig(){const e=a.workspace.getConfiguration("cmake.default",this.sourceUri);return{name:"",description:"",buildType:"Debug",buildDirectory:e.get("buildDirectory","${workspaceFolder}/build/"),generator:e.get("generator","Ninja"),extraGenerator:e.get("extraGenerator"),toolchain:void 0,env:e.get("env",{}),cacheEntries:e.get("cacheEntries",[])}}get isConfigurationGenerator(){return null!==this.generator.match(/^(Xcode|Visual Studio)/)}handleConfigurationChange(e){return J(this,void 0,void 0,(function*(){e.affectsConfiguration("cmake.default",this.sourceUri)&&(this.configuration=this._originalConfig)}))}loadConfigurations(){return J(this,void 0,void 0,(function*(){let e;try{e=yield function(e){return E(this,void 0,void 0,(function*(){let t=yield C(e).catch(()=>void 0);if(!t||!t.isFile)return;let r=JSON.parse(yield S(e,{encoding:"utf-8"}));if(!D(r))throw new R(D.errors);return r.configurations}))}(this.configurationsFile)}catch(e){(yield a.window.showWarningMessage("Failed to validate CMake Configurations for "+this.name+": "+e.message,"Edit Configurations"))&&a.window.showTextDocument(a.Uri.file(this.configurationsFile))}this._configs=e||x(),this.configuration=this._configs.find(e=>e.name===this.clientContext.currentConfiguration)||this._configs[0]}))}get cmakeExecutable(){return a.workspace.getConfiguration("cmake",this.sourceUri).get("cmakePath","cmake")}getBuildArguments(e){let t=[];return t.push("--build",this.buildDirectory),e&&t.push("--target",...e),this.isConfigurationGenerator&&t.push("--config",this.buildType),t.push(...X(this.sourceUri,"buildArguments")),t}build(e){return J(this,void 0,void 0,(function*(){return yield this.buildConfigCheck(),this.buildProc=h.spawn(this.cmakeExecutable,this.getBuildArguments(e),{cwd:this.buildDirectory,env:Object.assign(Object.assign({},process.env),this.environment)}),this.buildProc.stdout.pipe(new q).on("data",e=>{this.console.appendLine(e),this._matchers.forEach(t=>t.match(e))}),this.buildProc.stderr.pipe(new q).on("data",e=>{this.console.appendLine(e),this._matchers.forEach(t=>t.match(e))}),this._matchers.forEach(e=>{e.buildPath=this.buildDirectory,e.clear(),e.getDiagnostics().forEach(e=>this.diagnostics.delete(e[0]))}),this._cmakeMatcher.buildPath=this.sourcePath,this._cmakeMatcher.getDiagnostics().forEach(e=>this.diagnostics.delete(e[0])),this._cmakeMatcher.clear(),this.diagnostics.clear(),this.mayShowConsole(),new Promise((e,t)=>{let r=!1;this.buildProc||e(),this.buildProc.on("error",e=>{r=!0,t(e)}),this.buildProc.on("exit",(a,i)=>{null!==i&&t(`CMake process stopped unexpectedly with ${i}`),this.diagnostics.set(this._matchers.reduce((e,t)=>e.concat(t.getDiagnostics()),[])),this.diagnostics.set(this._cmakeMatcher.getDiagnostics()),this.buildProc=void 0,r||e()})})}))}stopBuild(){this.buildProc&&(m.a(this.buildProc.pid),this.buildProc=void 0)}mayShowConsole(){a.workspace.getConfiguration("cmake").get("showConsoleAutomatically",!0)&&this.console.show()}hasBuildDirectory(){return J(this,void 0,void 0,(function*(){let e=yield Z(this.buildDirectory).catch(()=>void 0);if(e){if(e.isDirectory())return!0;throw new Error("Build directory ("+this.buildDirectory+") exists, but is not a directory.")}return!1}))}createBuildDirectory(){return J(this,void 0,void 0,(function*(){yield N(this.buildDirectory)}))}removeBuildDirectory(){return J(this,void 0,void 0,(function*(){yield function e(t){return F(this,void 0,void 0,(function*(){try{yield O(t)}catch(e){return}let r=yield I(t);yield Promise.all(r.map(r=>F(this,void 0,void 0,(function*(){let a=i.join(t,r);(yield O(a)).isDirectory()?yield e(a):yield $(a)})))),yield M(t)}))}(this.buildDirectory)}))}get projectContext(){if(this.project){let e;return this.clientContext.projectContexts.hasOwnProperty(this.project.name)?e=this.clientContext.projectContexts[this.project.name]:(e=new ee,this.clientContext.projectContexts[this.project.name]=e),e}}updateContext(){this.project&&(this.clientContext.currentProjectName=this.project.name,this.target&&(this.projectContext.currentTargetName=this.target.name)),this.clientContext.currentConfiguration=this.configuration.name,this.extensionContext.workspaceState.update(this.name+"-context",this.clientContext)}selectContext(){if(this._projectTargets.clear(),this._targetProject.clear(),this._targets=[],this._projects.forEach(e=>{this._targets.splice(this._targets.length,0,...e.targets),this._projectTargets.set(e,e.targets),e.targets.forEach(t=>this._targetProject.set(t,e))}),this._projects.length>0){this._project=this._projects.find(e=>e.name===this.clientContext.currentProjectName)||this._projects[0],this.clientContext.currentProjectName=this._project.name;let e=this.projectContext,t=this.projectTargets;if(t&&t.length>0){let r=t.find(t=>e.currentTargetName===t.name)||t[0];this._target=r,e.currentTargetName=r.name}else this._target=void 0;this.updateContext()}else this._project=void 0,this._target=void 0}dispose(){this.disposables.forEach(e=>e.dispose())}}var ae=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const ie=Object(f.promisify)(d.stat),oe=Object(f.promisify)(d.writeFile),se=Object(f.promisify)(d.readdir),ne=Object(f.promisify)(d.readFile),ce=Object(f.promisify)(d.unlink);class le extends re{constructor(e,t,r){super(e,t,r)}regenerateBuildDirectory(){return ae(this,void 0,void 0,(function*(){yield this.createBuildDirectory()}))}configure(){return ae(this,void 0,void 0,(function*(){let e=[];for(var t of(yield this.configureConfigCheck(),e.push("-G"),e.push(this.generatorString),this.isConfigurationGenerator||(e.push("-D"),e.push(`CMAKE_BUILD_TYPE:STRING=${this.buildType}`)),this.toolchainFile&&(e.push("-D"),e.push(`CMAKE_TOOLCHAIN_FILE:FILEPATH=${this.toolchainFile}`),yield k(this.toolchainFile,this.configuration)),this.cacheEntries))e.push("-D"),t.type?e.push(`${t.name}:${t.type}=${t.value}`):e.push(`${t.name}=${t.value}`);e.push(...X(this.sourceUri,"configureArguments")),e.push("-S"),e.push(this.sourceUri.fsPath),e.push("-B"),e.push(this.buildDirectory),yield this.makeFileApiRequest();let r=h.spawn(this.cmakeExecutable,e,{cwd:this.workspaceFolder.uri.fsPath,env:Object.assign(Object.assign({},process.env),this.environment)});return r.stdout.pipe(new q).on("data",e=>{this.console.appendLine(e),this._cmakeMatcher.match(e)}),r.stderr.pipe(new q).on("data",e=>{this.console.appendLine(e),this._cmakeMatcher.match(e)}),this._cmakeMatcher.buildPath=this.sourcePath,this._cmakeMatcher.getDiagnostics().forEach(e=>this.diagnostics.delete(e[0])),this._cmakeMatcher.clear(),this.mayShowConsole(),new Promise((e,t)=>{let a=!1;r.on("error",e=>{a=!0,t(e)}),r.on("exit",(r,i)=>{null!==i&&t(new Error(`CMake process stopped unexpectedly with ${i}`)),this.diagnostics.set(this._cmakeMatcher.getDiagnostics()),this.readFileApiReply().then(()=>{a||e()}).catch(e=>t(e))})})}))}loadModel(){return ae(this,void 0,void 0,(function*(){yield this.readFileApiReply()}))}get requestFolder(){return i.join(this.buildDirectory,".cmake","api","v1","query","client-integration-vscode")}makeFileApiRequest(){return ae(this,void 0,void 0,(function*(){let e=["codemodel-v2","cache-v2","cmakeFiles-v1"];if(!(yield N(this.requestFolder))){let t=yield se(this.requestFolder);for(const r of t)-1===e.indexOf(r)&&(yield ce(i.join(this.requestFolder,r)))}for(const t of e){let e=i.join(this.requestFolder,t);(yield ie(e).catch(()=>void 0))||(yield oe(e,"",{flag:"w"}))}}))}get replyFolder(){return i.join(this.buildDirectory,".cmake","api","v1","reply")}readFileApiReply(){return ae(this,void 0,void 0,(function*(){let e=yield ie(this.replyFolder).catch(()=>void 0);if(!e||!e.isDirectory)return;let t=(yield se(this.replyFolder)).filter(e=>null!==e.match(/^index.+\.json$/)).sort().pop();if(!t)return;let r=JSON.parse(yield ne(i.join(this.replyFolder,t),{encoding:"utf-8"})).reply["client-integration-vscode"],a=r["codemodel-v2"],o=JSON.parse(yield ne(i.join(this.replyFolder,a.jsonFile),{encoding:"utf-8"})),s=r["cache-v2"],n=JSON.parse(yield ne(i.join(this.replyFolder,s.jsonFile),{encoding:"utf-8"}));this.cache.clear();for(const e of n.entries)this.cache.set(e.name,e);this.guessToolchain(),yield this.buildModel(o),this.selectContext(),this.isModelValid=!0,this._onModelChange.fire(this)}))}buildModel(e){return ae(this,void 0,void 0,(function*(){this._projects=[],this._targets=[];for(const t of e.configurations[0].projects){let r={name:t.name,targets:[]};yield this.readProjectEntry(e,t,r);for(const t of["all","install"])r.targets.push({name:t,type:"UTILITY",sourceDirectory:e.paths.source,compileGroups:[]});this._projects.push(r)}}))}readProjectEntry(e,t,r){return ae(this,void 0,void 0,(function*(){if(t.targetIndexes)for(const a of t.targetIndexes){let t=e.configurations[0].targets[a],o=JSON.parse(yield ne(i.join(this.replyFolder,t.jsonFile),{encoding:"utf-8"})),s={name:t.name,type:o.type,sourceDirectory:L(o.paths.source,e.paths.source),compileGroups:[]};if(o.compileGroups)for(const t of o.compileGroups){let r=[];t.compileCommandFragments&&(r=t.compileCommandFragments.map(e=>e.fragment));let a={compileFlags:r,defines:[],includePaths:[],sysroot:t.sysroot?t.sysroot.path:void 0,language:t.language,sources:t.sourceIndexes.map(t=>L(o.sources[t].path,e.paths.source))};t.defines&&(a.defines=t.defines.map(e=>e.define)),t.includes&&(a.includePaths=t.includes.map(e=>({path:e.path}))),s.compileGroups.push(a)}r.targets.push(s)}}))}}var ue=r(24),he=r(6),de=r(10),fe=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};function pe(e,t){let r=0,a=Object.create(null),i=Object.create(null),o="";function s(e){if("reply"===e.type||"error"===e.type){let t=e,r=a[t.cookie];r?(delete a[t.cookie],"error"===e.type?r.reject(new Error(t.errorMessage)):r.resolve(t)):console.log("No response promise: "+e)}else{let t=i[e.type];t?t(e):console.log("No message handler: "+e)}}return{listen(){e.on("data",e=>{o+=e.toString();const t=/\[== "CMake Server" ==\[([^]*?)\]== "CMake Server" ==\]/m;let r;for(;r=t.exec(o);)try{s(JSON.parse(r[1]))}catch(e){console.log(e)}finally{o=o.slice(r.index+r[0].length,o.length)}})},sendRequest(e,i){return fe(this,void 0,void 0,(function*(){let o=Object.assign({type:e,cookie:r.toString()},i);return r++,new Promise((e,r)=>{try{!function(e){t.write('[== "CMake Server" ==[\n'),t.write(JSON.stringify(e)),t.write("\n"),t.write(']== "CMake Server" ==]\n')}(o)}catch(e){r(e)}a[o.cookie]={resolve:e,reject:r}})}))},onMessage(e,t){i[e]=t}}}var me,ve,ge=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};!function(e){e.STATIC_LIBRARY="STATIC_LIBRARY",e.MODULE_LIBRARY="MODULE_LIBRARY",e.SHARED_LIBRARY="SHARED_LIBRARY",e.OBJECT_LIBRARY="OBJECT_LIBRARY",e.EXECUTABLE="EXECUTABLE",e.UTILITY="UTILITY",e.INTERFACE_LIBRARY="INTERFACE_LIBRARY"}(me||(me={})),function(e){e.Boolean="BOOL",e.FilePath="FILEPATH",e.Path="PATH",e.String="STRING",e.Internal="INTERNAL"}(ve||(ve={}));var ye=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const Pe=f.promisify(d.lstat),we=f.promisify(d.unlink);var Ee;!function(e){e[e.STOPPED=0]="STOPPED",e[e.CONNECTED=1]="CONNECTED",e[e.RUNNING=2]="RUNNING",e[e.CONFIGURED=3]="CONFIGURED",e[e.GENERATED=4]="GENERATED",e[e.BUILDING=5]="BUILDING"}(Ee||(Ee={}));class Ce extends re{constructor(e,t,r){super(e,t,r),this._state=Ee.STOPPED,this.disposables.push({dispose:()=>this.stop()})}get generatorPlatform(){if("object"==typeof this.configuration.toolchain)return this.configuration.toolchain.CMAKE_GENERATOR_PLATFORM}get generatorToolset(){if("object"==typeof this.configuration.toolchain)return this.configuration.toolchain.CMAKE_GENERATOR_TOOLSET}get pipeName(){return"win32"===he.platform?"\\\\?\\pipe\\"+this.name+"-"+he.pid+"-cmake":i.join(de.tmpdir(),this.name+"-"+he.pid+"-cmake.sock")}start(){return ye(this,void 0,void 0,(function*(){if(this._state>=Ee.RUNNING)return;yield this.spwanCMakeServer(),yield new Promise(e=>setTimeout(e,1e3)),yield this.createSocket();let e=yield this.createConnection();if(this._connection&&e){let t={sourceDirectory:this.sourcePath,buildDirectory:this.buildDirectory,protocolVersion:e.supportedProtocolVersions[0],generator:this.generator,extraGenerator:this.extraGenerator,platform:this.generatorPlatform,toolset:this.generatorToolset};yield this._connection.handshake(t)}}))}stop(){return ye(this,void 0,void 0,(function*(){if(this._state!==Ee.STOPPED){yield new Promise((e,t)=>{void 0!==this._process&&this._state!==Ee.STOPPED||e();let r=setTimeout(()=>t({name:"Kill Timeout",message:"Failed to kill server process (Timeout)."}),5e3);this._process.once("exit",()=>{clearTimeout(r),e()}),this._process.kill()});try{if("win32"!==de.platform()){try{yield Pe(this.pipeName)}catch(e){return}yield we(this.pipeName)}}catch(e){throw{name:"pipe delete error",message:"Failed to remove CMake Server socket: "+e.message}}}}))}regenerateBuildDirectory(){return ye(this,void 0,void 0,(function*(){yield this.stop(),yield this.start()}))}configure(){return ye(this,void 0,void 0,(function*(){let e=[];if(!this._connection||this._state<Ee.RUNNING)a.window.showWarningMessage("CMake Server ("+this.name+" is not running.");else{this.configureConfigCheck(),this.isConfigurationGenerator||(e.push("-D"),e.push(`CMAKE_BUILD_TYPE:STRING=${this.buildType}`)),this.toolchainFile&&(e.push("-D"),e.push(`CMAKE_TOOLCHAIN_FILE:FILEPATH=${this.toolchainFile}`),yield k(this.toolchainFile,this.configuration));for(let t of this.cacheEntries)e.push("-D"),t.type?e.push(`${t.name}:${t.type}=${t.value}`):e.push(`${t.name}=${t.value}`);this.mayShowConsole(),this._cmakeMatcher.buildPath=this.sourcePath,this._cmakeMatcher.getDiagnostics().forEach(e=>this.diagnostics.delete(e[0])),this._cmakeMatcher.clear(),this._state=Ee.RUNNING;try{yield this._connection.configure(e),this._state=Ee.CONFIGURED}catch(e){return void this.diagnostics.set(this._cmakeMatcher.getDiagnostics())}try{yield this._connection.compute()}catch(e){return void this.diagnostics.set(this._cmakeMatcher.getDiagnostics())}this.diagnostics.set(this._cmakeMatcher.getDiagnostics()),this._state=Ee.GENERATED,yield this.updateModel()}}))}updateModel(){return ye(this,void 0,void 0,(function*(){if(!this._connection||this._state<Ee.GENERATED)return;this._model=yield this._connection.codemodel(),this.updateValues();let e=yield this._connection.cache();this.cache.clear(),e.forEach(e=>this.cache.set(e.key,{name:e.key,value:e.value,type:e.type})),this.guessToolchain(),this._onModelChange.fire(this)}))}build(e){const t=Object.create(null,{build:{get:()=>super.build}});return ye(this,void 0,void 0,(function*(){this._state<Ee.GENERATED&&(yield this.configure()),this._state!==Ee.BUILDING&&(this._state=Ee.BUILDING,yield t.build.call(this,e),this._state=Ee.GENERATED)}))}updateValues(){this._projects=this._model.configurations.find(e=>e.name===this.buildType).projects.map(e=>({name:e.name,targets:e.targets.filter(e=>"INTERFACE_LIBRARY"!==e.type).map(t=>{const r=L(t.sourceDirectory,e.sourceDirectory);return{name:t.name,sourceDirectory:r,type:t.type,compileGroups:(t.fileGroups||[]).filter(e=>void 0!==e.language).map(e=>({compileFlags:e.compileFlags?e.compileFlags.split(Ce.splitShellRegex):[],compilerPath:"",defines:e.defines||[],sysroot:t.sysroot,includePaths:(e.includePath||[]).map(e=>({path:e.path})),language:e.language,sources:e.sources.map(e=>L(e,r))}))}})}));for(const e of this._projects)for(const t of["all","install"])e.targets.push({name:t,type:"UTILITY",sourceDirectory:this.sourcePath,compileGroups:[]});this.isModelValid=!0,this.selectContext()}spwanCMakeServer(){return ye(this,void 0,void 0,(function*(){let e=a.workspace.getConfiguration("cmake",this.sourceUri).get("cmakePath","cmake"),t=Object.assign(Object.assign({},he.env),this.environment);this._process=h.execFile(e,["-E","server","--pipe="+this.pipeName,"--experimental"],{env:t}),this._process.on("error",e=>{a.window.showErrorMessage("CMake Server ("+this.name+") process error: "+e.message)}),this._process.on("exit",()=>{this._state=Ee.STOPPED,this._socket&&(this._socket.destroy(),this._socket=void 0),this._process=void 0})}))}createSocket(){return ye(this,void 0,void 0,(function*(){this._socket=ue.createConnection(this.pipeName),this._socket.on("error",e=>{a.window.showErrorMessage("CMake Server ("+this.name+") socket error: "+e.message)}),this._socket.on("close",()=>{this._state=Ee.STOPPED,this._process&&this._process.kill(),this._socket=void 0})}))}createConnection(){return ye(this,void 0,void 0,(function*(){return this._socket?(this._connection=function(e,t){let r=pe(e,t);return{listen(){r.listen()},onHello:e=>r.onMessage("hello",e),onProgress:e=>r.onMessage("progress",e),onSignal:e=>r.onMessage("signal",e),onMessage:e=>r.onMessage("message",e),configure(e){return ge(this,void 0,void 0,(function*(){return r.sendRequest("configure",{cacheArguments:e})}))},compute(){return ge(this,void 0,void 0,(function*(){return r.sendRequest("compute",{})}))},codemodel(){return ge(this,void 0,void 0,(function*(){return r.sendRequest("codemodel",{})}))},cache(e){return ge(this,void 0,void 0,(function*(){return(yield r.sendRequest("cache",{keys:e})).cache}))},handshake:e=>r.sendRequest("handshake",e)}}(this._socket,this._socket),this._connection.onMessage(e=>this.onMessage(e)),this._connection.onSignal(e=>this.onSignal(e)),this._connection.onProgress(e=>this.onProgress(e)),this._socket.once("connect",()=>{this._connection&&this._connection.listen()}),new Promise((e,t)=>{let r=setTimeout(()=>{t({name:"Timeout",message:"CMake Server failed to respond."})},5e3);if(void 0===this._connection)return t({name:"no connection",message:"No connection existing."});this._connection.onHello(t=>{this._state=Ee.RUNNING,clearTimeout(r),e(t)})})):Promise.reject({name:"no socket",message:"No socket existing."})}))}onProgress(e){}onSignal(e){"dirty"===e.name&&a.workspace.getConfiguration("cmake").get("reconfigureOnChange",!1)&&this._state===Ee.GENERATED&&this.configure().then(()=>this.updateModel())}onMessage(e){this.console.appendLine(e.message),e.message.split("\n").forEach(e=>this._cmakeMatcher.match(e))}}Ce.splitShellRegex=/\s+(?=[^"']+$|(?:[^"']*"[^"]*")*[^"']*$|(?:[^'"]*'[^']*')*[^'"]*$)/;var _e=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};class be{constructor(e){if(this.disposables=[],this._clients=new Map,this._workspaceWatcher=new Map,this.addClientEmitter=new a.EventEmitter,this.onAddClient=this.addClientEmitter.event,this.deletelientEmitter=new a.EventEmitter,this.onDeleteClient=this.deletelientEmitter.event,this.changeClientModelEmitter=new a.EventEmitter,this.onChangeClientModel=this.changeClientModelEmitter.event,this._context=e,this.disposables.push(a.workspace.onDidChangeWorkspaceFolders(e=>{this.onWorkspaceFolderChange(e)})),a.workspace.workspaceFolders)for(let e of a.workspace.workspaceFolders)a.workspace.findFiles(new a.RelativePattern(e,"CMakeLists.txt")).then(t=>t.forEach(t=>this.createServer(t,e))),this.watchFolder(e);this._projectItem=a.window.createStatusBarItem(a.StatusBarAlignment.Left,12),this._targetItem=a.window.createStatusBarItem(a.StatusBarAlignment.Left,11),this._configItem=a.window.createStatusBarItem(a.StatusBarAlignment.Left,10),this._buildItem=a.window.createStatusBarItem(a.StatusBarAlignment.Left,9),this._projectItem.command="cmake.selectProject",this._targetItem.command="cmake.selectTarget",this._configItem.command="cmake.selectConfiguration",this._buildItem.command="cmake.buildCurrentTarget",this._buildItem.text="$(beaker)",this._projectItem.tooltip="Current CMake project",this._targetItem.tooltip="Current CMake target",this._configItem.tooltip="Current CMake configuration",this._buildItem.tooltip="Build current CMake target"}get currentProject(){return this._currentProject}set currentProject(e){this._currentProject=e,e&&this._context.workspaceState.update("currentProject",e.project.name)}get currentClient(){if(this.currentProject)return this.currentProject.client}getClientByProjectName(e){for(let t of this._clients.values())if(t.projects.find(t=>t.name===e))return t}getProjectContexts(){let e=[];for(const t of this._clients.values())t.projects.map(r=>e.push({project:r,client:t}));return e.length>0&&this.modelChanged(e[0].client),e}modelChanged(e){if(void 0===this.currentProject&&[...this._clients.values()].reduce((e,t)=>e=e&&t.isModelValid,!0)){let t,r;(r=this._context.workspaceState.get("currentProject"))&&(t=this.getClientByProjectName(r)),void 0===t&&(t=e);let a=t.projects.find(e=>e.name===r);a?t.project=a:a=t.project,a&&(this.currentProject={client:t,project:a})}else this.currentProject&&this.currentProject.client===e&&(e.project?this.currentProject.project=e.project:this.currentProject=void 0);this.updateStatusBar(),this.changeClientModelEmitter.fire(e)}updateStatusBar(){this.currentClient?(this.currentClient.project?(this._projectItem.text=this.currentClient.project.name,this.currentClient.target?this._targetItem.text=this.currentClient.target.name:this._projectItem.text="No Target",this._targetItem.show()):(this._projectItem.text="No Project",this._targetItem.hide()),this._projectItem.show(),this._configItem.text=this.currentClient.configuration.name,this._configItem.show(),this._buildItem.show()):(this._projectItem.hide(),this._configItem.hide(),this._targetItem.hide(),this._buildItem.hide())}onWorkspaceFolderChange(e){e.added.forEach(e=>{a.workspace.findFiles(new a.RelativePattern(e,"CMakeLists.txt")).then(e=>e.forEach(e=>this.createServer(e))),this.watchFolder(e)}),e.removed.forEach(e=>{let t=[...this._clients.keys()];for(let r of t)r.startsWith(e.uri.fsPath)&&this.deleteServer(a.Uri.file(r));this._workspaceWatcher.get(e).dispose(),this._workspaceWatcher.delete(e)})}watchFolder(e){const t=new a.RelativePattern(e,"CMakeLists.txt"),r=a.workspace.createFileSystemWatcher(t,!1,!0,!0);r.onDidCreate(e=>this.createServer(e)),r.onDidDelete(e=>this.deleteServer(e)),this._workspaceWatcher.set(e,r)}createServer(e,t){return _e(this,void 0,void 0,(function*(){if("file"!==e.scheme||this._clients.has(e.fsPath))return;let r,o=a.Uri.file(i.dirname(e.fsPath));try{if((r="Server"===(yield Y(e))?new Ce(o,t,this._context):new le(o,t,this._context)).onModelChange(e=>this.modelChanged(e)),r.onDidChangeConfiguration(()=>this.updateStatusBar()),this._clients.set(e.fsPath,r),this.addClientEmitter.fire(r),yield r.loadConfigurations(),a.workspace.getConfiguration("cmake").get("configureOnStart",!0))try{yield r.configure()}catch(e){a.window.showErrorMessage("Failed to configure project("+r.name+"): "+e.message)}else r instanceof le&&(yield r.loadModel())}catch(e){a.window.showErrorMessage("Failed to start CMake Client("+o.fsPath+"): "+e.message)}}))}deleteServer(e){let t=this._clients.get(e.fsPath);t&&(this.deletelientEmitter.fire(t),this._clients.delete(e.fsPath),t.dispose()),this.updateStatusBar()}configureWorkspace(){return _e(this,void 0,void 0,(function*(){try{yield Promise.all([...this._clients.values()].map(e=>_e(this,void 0,void 0,(function*(){yield e.configure()}))))}catch(e){a.window.showErrorMessage("Failed to configure workspace: +"+e.message)}}))}configureProject(e){return _e(this,void 0,void 0,(function*(){let t;if(t=e?this.currentClient:yield n([...this._clients.values()]))try{yield t.configure()}catch(e){a.window.showErrorMessage("Failed to configure project("+t.project+"): "+e.message)}}))}buildWorkspace(){return _e(this,void 0,void 0,(function*(){const e=a.workspace.getConfiguration("cmake.build").get("workspaceTargets",[]),t=a.workspace.getConfiguration("cmake.build").get("targetDependencies",[]);if(0===e.length)for(const t of this._clients.values())e.push(...t.projects.map(e=>({project:e.name})));try{let r=new u(t).resolve(e);for(const e of r)yield Promise.all(e.map(e=>{let t=this.getClientByProjectName(e.project);t&&(e.target?t.build([e.target]):t.build())}))}catch(e){a.window.showErrorMessage("Failed to build workspace: "+e.message)}}))}buildProject(e=!1){return _e(this,void 0,void 0,(function*(){let t,r;if(e)(t=this.currentClient)&&(r=t.project);else{let e=yield c(this.getProjectContexts());e&&(t=e.client,r=e.project)}if(t&&r)try{const e=a.workspace.getConfiguration("cmake.build").get("targetDependencies",[]);let t=new u(e).resolve({project:r.name});for(const e of t)yield Promise.all(e.map(e=>{let t=this.getClientByProjectName(e.project);t&&(e.target?t.build([e.target]):t.build())}))}catch(e){a.window.showErrorMessage('Failed to build project "'+r+'": '+e.message)}}))}buildTarget(e=!1){return _e(this,void 0,void 0,(function*(){let t,r;if(e?(t=this.currentProject)&&(r=t.client.target):(t=yield c(this.getProjectContexts()))&&(r=yield l(t)),t&&r)try{const e=a.workspace.getConfiguration("cmake.build").get("targetDependencies",[]);let i=new u(e).resolve({project:t.project.name,target:r.name});for(const e of i)yield Promise.all(e.map(e=>{let t=this.getClientByProjectName(e.project);t&&(e.target?t.build([e.target]):t.build())}))}catch(e){a.window.showErrorMessage('Failed to build target "'+r+'": '+e.message)}}))}stopBuild(e){return _e(this,void 0,void 0,(function*(){let t;if(e)t=this.currentClient;else{let e=yield c(this.getProjectContexts());e&&(t=e.client)}t&&t.stopBuild()}))}cleanWorkspace(){return _e(this,void 0,void 0,(function*(){try{for(const e of this._clients.values())yield e.build(["clean"])}catch(e){a.window.showErrorMessage("Failed to clean workspace: "+e.message)}}))}cleanProject(e){return _e(this,void 0,void 0,(function*(){let t;if(t=e?this.currentClient:yield n([...this._clients.values()]))try{yield t.build(["clean"])}catch(e){a.window.showErrorMessage('Failed to clean project "'+t.project+'": '+e.message)}}))}installProject(e){return _e(this,void 0,void 0,(function*(){let t;if(t=e?this.currentClient:yield n([...this._clients.values()]))try{yield t.build(["install"])}catch(e){a.window.showErrorMessage("Failed to install project folder("+t.sourceUri.fsPath+"): "+e.message)}}))}selectProject(){return _e(this,void 0,void 0,(function*(){let e=yield c(this.getProjectContexts());e&&(this.currentProject=e,this.currentProject.client.project=e.project,this.updateStatusBar())}))}selectTarget(){return _e(this,void 0,void 0,(function*(){if(void 0===this.currentProject&&(yield this.selectProject()),this.currentProject){let e=yield l(this.currentProject);e&&(this.currentProject.client.target=e)}this.updateStatusBar()}))}selectConfiguration(){return _e(this,void 0,void 0,(function*(){if(void 0===this.currentProject&&(yield this.selectProject(),yield this.selectTarget()),this.currentProject){let e=yield function(e){return o(this,void 0,void 0,(function*(){let t=e.client.configurations.map(e=>({config:e,label:e.name,description:e.description}));t.push({config:{},label:"Edit Configurations...",edit:!0});let r=yield s(t,t.find(t=>t.config===e.client.configuration));if(r)return r.edit?void(yield a.commands.executeCommand("cmake.editCurrentConfigurations")):r.config}))}(this.currentProject);e&&(this.currentProject.client.configuration=e,a.workspace.getConfiguration("cmake").get("configureOnStart",!0)&&(yield this.currentProject.client.configure()))}this.updateStatusBar()}))}removeBuildDirectory(){return _e(this,void 0,void 0,(function*(){let e=yield n([...this._clients.values()]);if(e)try{yield e.removeBuildDirectory()}catch(e){a.window.showErrorMessage("Failed to removce build directory: "+e.message)}}))}restartClient(e){return _e(this,void 0,void 0,(function*(){let t=yield n([...this._clients.values()]);if(t&&t instanceof Ce)try{if(yield t.stop(),e&&(yield t.removeBuildDirectory()),yield t.start(),a.workspace.getConfiguration("cmake").get("configureOnStart",!0))try{yield t.configure()}catch(e){a.window.showErrorMessage("Failed to configure project("+t.name+"): "+e.message)}}catch(e){a.window.showErrorMessage("Failed to restart CMake Server ("+t.name+"): "+e.message)}}))}editConfigurations(e){return _e(this,void 0,void 0,(function*(){let t;if(t=e?this.currentClient:yield n([...this._clients.values()])){let e;if(yield t.hasConfigurationsFile())e=yield a.workspace.openTextDocument(a.Uri.file(t.configurationsFile));else{e=yield a.workspace.openTextDocument(a.Uri.parse("untitled:"+t.configurationsFile));let r=yield a.window.showTextDocument(e);yield r.edit(e=>{e.insert(new a.Position(0,0),JSON.stringify({configurations:t.configurations},void 0,2))})}yield a.window.showTextDocument(e)}}))}dispose(){this.disposables.forEach(e=>e.dispose()),this._clients.forEach(e=>e.dispose());for(const e of this._workspaceWatcher.values())e.dispose()}}var Se=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};var je=r(25),xe=r(11),ke=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};const De=/(?:gcc|g\+\+|cc|c\+\+)[^/\\]*$/,Re=/cl\.exe$/,Fe=/clang(?:\+\+)?[^/\\]*$/,Ie=/-std=((?:iso9899\:|(?:(?:gnu|c)(?:\+\+)?))\w+)/,Ae={c89:"c89",c90:"c99","iso9899:1990":"c99","iso9899:199409":"c99",c99:"c99",c9x:"c99","iso9899:1999":"c99","iso9899:199x":"c99",c11:"c11",c1x:"c11","iso9899:2011":"c11",c17:"c11",c18:"c11","iso9899:2017":"c11","iso9899:2018":"c11",gnu89:"c89",gnu90:"c99",gnu99:"c99",gnu9x:"c99",gnu11:"c11",gnu1x:"c11",gnu17:"c11",gnu18:"c11","c++98":"c++98","c++03":"c++03","gnu++98":"c++98","gnu++03":"c++03","c++11":"c++11","c++0x":"c++11","gnu++11":"c++11","gnu++0x":"c++11","c++14":"c++14","c++1y":"c++14","gnu++14":"c++14","gnu++1y":"c++14","c++17":"c++17","c++1z":"c++17","gnu++17":"c++17","gnu++1z":"c++17","c++20":"c++20","c++2a":"c++20","gnu++20":"c++20","gnu++2a":"c++20"},Oe=/[\/\-]Std\:(c\+\+\w+)/i,$e={"c++14":"c++14","c++17":"c++17","c++20":"c++20","c++latest":"c++20"};function Te(e,t){return ke(this,void 0,void 0,(function*(){const r=null!==(De.exec(e)||Fe.exec(e)),a=null!==Re.exec(e);return"CXX"===t?r?function(e){return ke(this,void 0,void 0,(function*(){const t=Object(h.spawn)(e,["-x","c++","-E","-dM","-"]);t.stdin.end();let r=!1;return new Promise((e,a)=>{t.stdout.pipe(new q).on("data",t=>{const a=t.match(/__cplusplus\s+(\d{4}\d{2})/);a&&(r=!0,a[1]<="199711"&&e("c++98"),a[1]<="201103"&&e("c++11"),a[1]<="201402"&&e("c++14"),a[1]<="201703"&&e("c++17"),e("c++20"))}),t.stderr.on("data",e=>console.log(`${e}`)),t.on("exit",()=>{r||e("c++98")}),t.on("error",e=>{a(e)})})}))}(e):a?"c++14":"c++20":"C"===t?r?function(e){return ke(this,void 0,void 0,(function*(){const t=Object(h.spawn)(e,["-x","c","-E","-dM","-"]);let r=!1;return t.stdin.end(),new Promise((e,a)=>{t.stdout.pipe(new q).on("data",t=>{const a=t.match(/__cplusplus\s+(\d{4}\d{2})/);a&&(r=!0,a[1]<="199901"&&e("c99"),e("c11"))}),t.on("exit",()=>{r||e("c89")}),t.on("error",e=>{a(e)})})}))}(e):a?"c89":"c11":"CUDA"===t?"c++14":"c++20"}))}function Me(e,t,r){let a=e.join(" "),i=Ie.exec(a);return i?Ae[i[1]]:(i=Oe.exec(a))?$e[i[1]]:t}function Ne(e){if(e){if(e.match(De))return"gcc-x64";if(e.match(Re))return"msvc-x64";if(e.match(Fe))return"clang-x64"}return"gcc-x64"}function Le(e){return e.compileFlags.reduce((e,t)=>(e.push(...t.split(/\s+/)),e),[])}function Ue(e,t){const r=["c++98","c++03","c++11","c++14","c++17","c++20"],a=["c89","c99","c11"];return e.startsWith("c++")?t.startsWith("c++")?r.indexOf(e)>r.indexOf(t)?e:t:e:t.startsWith("c++")?t:a.indexOf(e)>a.indexOf(t)?e:t}function Be(e){let t=new Map,r=[];for(let a of e){let e=r;for(const r of a)r.match(/^[^-]/)?e.push(r):t.has(r)?e=t.get(r):(e=[],t.set(r,e))}let a=[];for(const[e,r]of t)a.push(e),a.push(...r);return a.push(...r),a}function*Ve(e){for(const t of e)t.compilerArgs&&(yield t.compilerArgs)}function ze(e,t=!0){let r=new Set,a=new Set,i=new Set,o="c89",s=void 0;for(const t of e)s||(s=t),t.defines.map(Set.prototype.add,r),t.includePath.map(Set.prototype.add,a),o=Ue(o,t.standard);return s?{compilerPath:s.compilerPath,compilerArgs:t?Be(Ve(e)):s.compilerArgs,windowsSdkVersion:s.windowsSdkVersion,forcedInclude:Array.from(i.values()),defines:Array.from(r.values()),includePath:Array.from(a.values()),intelliSenseMode:s.intelliSenseMode,standard:o}:{includePath:[],defines:[],intelliSenseMode:"clang-x64",standard:"c++17"}}function qe(e){let t;return t=Array.isArray(e)?ze(e):e,{browsePath:[...new Set([...t.forcedInclude||[],...t.includePath])],compilerPath:t.compilerPath,compilerArgs:t.compilerArgs,standard:t.standard,windowsSdkVersion:t.windowsSdkVersion}}var Ge=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};class Qe{constructor(){this.CXX=[],this.C=[],this.CUDA=[],this.FORTRAN=[]}*[Symbol.iterator](){for(const e of this.CXX)yield e;for(const e of this.CUDA)yield e;for(const e of this.C)yield e}}class Ke{constructor(e){this.setTargetConfigurations(e)}setTargetConfigurations(e){this.C=e.C.length>0?ze(e.C):void 0,this.CXX=e.CXX.length>0?ze(e.CXX):void 0,this.CUDA=e.CUDA.length>0?ze(e.CUDA):void 0}}class He{constructor(e){this.client=e,this.clientFiles=new Set,this.projectInfos=new Map,this.targetInfos=new Map,this.browseConfig={browsePath:[]},this.compilers={CXX:{path:"",standard:"c++20",intelliSenseMode:"gcc-x64"},C:{path:"",standard:"c11",intelliSenseMode:"gcc-x64"},CUDA:{path:"",standard:"c++20",intelliSenseMode:"gcc-x64"},FORTRAN:{path:"",standard:"c++20",intelliSenseMode:"gcc-x64"}},this.disposables=[]}updateCompilerInformation(){return Ge(this,void 0,void 0,(function*(){const e=a.workspace.getConfiguration("cmake.cpptools",this.client.sourceUri),t=e.get("compilerPath"),r=e.get("intelliSenseMode"),i=e.get("standard");for(const e of Object.keys(this.compilers)){const o=a.workspace.getConfiguration(`cmake.cpptools.languageConfiguration.${e}`,this.client.sourceUri),s=o.get("compilerPath")||t||this.client.toolchain.getCompiler(e)||"";this.compilers[e]={path:s,standard:o.get("standard")||i||(yield Te(s,e)),intelliSenseMode:o.get("intelliSenseMode")||r||Ne(s)}}this.windowsSdkVersion=e.get("windowsSdkVersion")||this.client.toolchain.windowsSdkVersion}))}get emptyCompilerPath(){return Object.values(this.compilers).reduce((e,t)=>""===t.path&&e,!0)}get defaultCompiler(){return""!==this.compilers.CXX.path?this.compilers.CXX.path:this.compilers.C.path}getBrowseConfiguration(e){let t=this.client.projects.find(t=>t.name===e.project);if(t)if(e.target){let r=t.targets.find(t=>t.name===e.target);if(r&&this.targetInfos.has(r))return this.targetInfos.get(r).targetConfiguration}else if(this.projectInfos.has(t))return this.projectInfos.get(t).projectConfiguration}getSourceFileConfigurations(e){return e.reduce((e,t)=>{let r=this.getBrowseConfiguration(t);return r&&e.push(r),e},[])}setBrowseConfiguration(e){this.browseConfig=qe(this.getSourceFileConfigurations(e))}makeReducedBrowseConfiguration(){let e=[];for(const t of this.targetInfos.values())e.push(t.targetConfiguration);this.browseConfig=qe(e)}}var We=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};class Xe{constructor(e){this.context=e,this.name="CMake Integration",this.extensionId="go2sh.cmake-integration",this.clientInfos=new Map,this.sourceFiles=new Map,this.browseConfig={browsePath:[]},this.disposables=[],this.didChangeConfigurationEmitter=new a.EventEmitter,this.onDidChangeConfiguration=this.didChangeConfigurationEmitter.event,this.fileExtensions={C:/(?:c|h|def|inc)$/i,CXX:/(?:cc|c\+\+|cpp|cxx|h|h\+\+|hpp|hxx)$/i,CUDA:/(?:cu|h|hu)$/i,FORTRAN:/^(?:f|for|f90|f95|f03)$/i},this.disposables.push(a.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("cmake.cpptools")&&this.updateClients()}))}addSourceFileConfiguration(e,t,r){let i=a.Uri.file(t);e.clientFiles.add(i.fsPath),this.sourceFiles.set(i.fsPath,{uri:a.Uri.file(i.fsPath),configuration:r})}guessSourceFile(e){for(const[t,r]of this.clientInfos){if(e.startsWith(t.sourceUri.fsPath)&&a.workspace.getConfiguration("cmake.cpptools",t.sourceUri).get("guessSourceFileConfigurations",!0))for(const[t,o]of r.targetInfos){const s=a.Uri.file(t.sourceDirectory);if(!e.startsWith(s.fsPath))continue;let n=t.compileGroups.map(e=>e.language);const c=i.extname(e);let l=["CXX","CUDA","C"].filter(e=>void 0!==n.find(t=>e===t)&&null!==c.match(this.fileExtensions[e])).map(e=>o.languageConfiguration[e])[0];if(l)return this.addSourceFileConfiguration(r,e,l),!0}}return!1}processClient(e){return We(this,void 0,void 0,(function*(){let t=this.clientInfos.get(e);for(const e of t.clientFiles.values())this.sourceFiles.delete(e);t.clientFiles.clear(),yield t.updateCompilerInformation(),this.checkClientInfo(t),e.targets.forEach(e=>{this.addConfigurationsFromTarget(t,e)});let r=a.workspace.getConfiguration("cmake.cpptools",e.sourceUri).get("browseTargets",[]);r.length>0?t.setBrowseConfiguration(r):t.makeReducedBrowseConfiguration()}))}updateClients(){return We(this,void 0,void 0,(function*(){yield Promise.all(Array.from(this.clientInfos.keys()).map(e=>this.processClient(e))),this.makeGlobalBrowseConfiguration(),this.didChangeConfigurationEmitter.fire(this)}))}updateClient(e){return We(this,void 0,void 0,(function*(){yield this.processClient(e),this.makeGlobalBrowseConfiguration(),this.didChangeConfigurationEmitter.fire(this)}))}makeGlobalBrowseConfiguration(){let e=a.workspace.getConfiguration("cmake.cpptools").get("globalBrowseTargets",[]),t=[];if(e.length>0)t=Array.from(this.clientInfos.values()).reduce((t,r)=>(t.push(qe(r.getSourceFileConfigurations(e))),t),[]);else{t=[];for(const e of this.clientInfos.values())t.push(e.browseConfig)}this.browseConfig=function(e,t=!0){let r=new Set,a="c89",i=void 0;for(const t of e)i||(i=t),t.browsePath.map(Set.prototype.add,r),t.standard&&(a=Ue(a,t.standard));return i?{compilerPath:i.compilerPath,compilerArgs:t?Be(Ve(e)):i.compilerArgs,windowsSdkVersion:i.windowsSdkVersion,browsePath:Array.from(r.values()),standard:a}:{browsePath:[]}}(t)}addConfigurationsFromTarget(e,t){if(!t.type.match(/(?:STATIC_LIBRARY|MODULE_LIBRARY|SHARED_LIBRARY|OBJECT_LIBRARY|INTERFACE_LIBRARY|EXECUTABLE)/)||!t.compileGroups)return;const r=new Qe;for(const a of t.compileGroups){const t=Le(a);a.sysroot&&t.push(`--sysroot=${a.sysroot}`);let o={compilerPath:e.compilers[a.language].path,compilerArgs:t,includePath:a.includePaths.map(e=>i.normalize(e.path)),defines:a.defines,intelliSenseMode:e.compilers[a.language].intelliSenseMode,standard:Me(a.compileFlags,e.compilers[a.language].standard,a.language),windowsSdkVersion:e.windowsSdkVersion};r[a.language].push(o),a.sources.forEach(t=>{this.addSourceFileConfiguration(e,t,o)})}let a={target:t,targetConfiguration:ze(r),languageConfiguration:new Ke(r)};e.targetInfos.set(t,a)}checkClientInfo(e){if(this.context.workspaceState.get("disableClientInfoWarning",!1))return;const t=["Settings","Don't show again"];let r;e.emptyCompilerPath?r=a.window.showWarningMessage("Compiler path is not detected. cpptools might not be able to report correct intelliSense results. Please set the compiler path in the settings.",...t):null!==e.defaultCompiler.match(Re)&&""===e.windowsSdkVersion&&(r=a.window.showWarningMessage("Windows Sdk Version is not detected. cpptools might not be able to report correct intelliSense results. Please set the Windows Sdk Version in the settings.",...t)),r&&r.then(e=>{e===t[0]&&a.commands.executeCommand("workbench.action.openWorkspaceSettings"),e===t[1]&&this.context.workspaceState.update("disableClientInfoWarning",!0)})}addClient(e){let t=new He(e);t.disposables.push(e.onModelChange(e=>this.updateClient(e))),this.clientInfos.set(e,t)}deleteClient(e){let t=this.clientInfos.get(e);for(const e of t.clientFiles.values())this.sourceFiles.delete(e);t.disposables.map(e=>e.dispose()),this.clientInfos.delete(e)}canProvideConfiguration(e,t){return We(this,void 0,void 0,(function*(){return!!this.sourceFiles.has(e.fsPath)||this.guessSourceFile(e.fsPath)}))}provideConfigurations(e,t){return We(this,void 0,void 0,(function*(){return e.reduce((e,t)=>{let r=this.sourceFiles.get(t.fsPath);return r&&e.push(r),e},[])}))}canProvideBrowseConfiguration(e){return We(this,void 0,void 0,(function*(){return!0}))}provideBrowseConfiguration(e){return We(this,void 0,void 0,(function*(){return this.browseConfig}))}canProvideBrowseConfigurationsPerFolder(e){return We(this,void 0,void 0,(function*(){return!0}))}provideFolderBrowseConfiguration(e,t){return We(this,void 0,void 0,(function*(){for(const[t,r]of this.clientInfos)if(t.workspaceFolder.uri.toString()===e.toString())return r.browseConfig;return{}}))}dispose(){this.disposables.forEach(e=>{e.dispose()})}}r.d(t,"activate",(function(){return et})),r.d(t,"deactivate",(function(){return tt}));var Ye=function(e,t,r,a){return new(r||(r=Promise))((function(i,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function n(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,n)}c((a=a.apply(e,t||[])).next())}))};let Je,Ze;function et(e){return Ye(this,void 0,void 0,(function*(){Ze=[],Je=new be(e);const t=e.globalState.get("version"),r=je.a;t?function(e,t){Se(this,void 0,void 0,(function*(){const[r,i]=e.split("."),[o,s]=t.split(".");if(!(r<o||i<s))if(r>o){const t=["Changelog"];(yield a.window.showInformationMessage(`CMake Integration for VS Code has been updated to ${e}.`,...t))===t[0]&&a.env.openExternal(a.Uri.parse("https://github.com/go2sh/cmake-integration-vscode/blob/master/CHANGELOG.md"))}else if("0"===o){if(s<="3"){const t=["Edit Configurations","Documentation","Changelog"];let r=yield a.window.showInformationMessage(`CMake Integration for VS Code has been updated to ${e}. `+'The configuration through settings has changed to a custom configuration file called "cmake_configurations.json"',...t);r===t[0]&&a.commands.executeCommand("cmake.editConfiguration"),r===t[1]&&a.env.openExternal(a.Uri.parse("https://go2sh.github.io/cmake-integration-vscode/")),r===t[2]&&a.env.openExternal(a.Uri.parse("https://github.com/go2sh/cmake-integration-vscode/blob/master/CHANGELOG.md"))}if(s<="6"){const t=["Edit Settings","Documentation","Changelog"];let r=yield a.window.showInformationMessage(`CMake Integration for VS Code has been updated to ${e}. `+"Some settings keys have been placed into new subkeys. Please check your settings files for any mismatches.",...t);r===t[0]&&a.commands.executeCommand("workbench.action.openSettings"),r===t[1]&&a.env.openExternal(a.Uri.parse("https://go2sh.github.io/cmake-integration-vscode/reference/settings.html#configuration-defaults")),r===t[2]&&a.env.openExternal(a.Uri.parse("https://github.com/go2sh/cmake-integration-vscode/blob/master/CHANGELOG.md"))}}}))}(r,t):function(e){Se(this,void 0,void 0,(function*(){const t=["Edit Settings","Edit Configurations","Documentation"];let r=yield a.window.showInformationMessage(`Welcome to CMake Integration for VS Code version ${e}. `+"Set your desired build environment in the settings, edit your build configurations and you are ready to go!",...t);r===t[0]&&a.commands.executeCommand("workbench.action.openSettings"),r===t[1]&&a.commands.executeCommand("cmake.editConfiguration"),r===t[2]&&a.env.openExternal(a.Uri.parse("https://go2sh.github.io/cmake-integration-vscode/"))}))}(r),e.globalState.update("version",r),Ze.push(a.commands.registerCommand("cmake.configureProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.configureProject()})))),Ze.push(a.commands.registerCommand("cmake.configureCurrentProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.configureProject(!0)})))),Ze.push(a.commands.registerCommand("cmake.configureWorkspace",()=>Ye(this,void 0,void 0,(function*(){return yield Je.configureWorkspace()})))),Ze.push(a.commands.registerCommand("cmake.cleanProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.cleanProject()})))),Ze.push(a.commands.registerCommand("cmake.cleanCurrentProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.cleanProject(!0)})))),Ze.push(a.commands.registerCommand("cmake.cleanWorkspace",()=>Ye(this,void 0,void 0,(function*(){return yield Je.cleanWorkspace()})))),Ze.push(a.commands.registerCommand("cmake.removeBuildDirectory",()=>Ye(this,void 0,void 0,(function*(){return yield Je.removeBuildDirectory()})))),Ze.push(a.commands.registerCommand("cmake.buildTarget",()=>Ye(this,void 0,void 0,(function*(){return yield Je.buildTarget()})))),Ze.push(a.commands.registerCommand("cmake.buildCurrentTarget",()=>Ye(this,void 0,void 0,(function*(){return yield Je.buildTarget(!0)})))),Ze.push(a.commands.registerCommand("cmake.buildProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.buildProject()})))),Ze.push(a.commands.registerCommand("cmake.buildCurrentProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.buildProject(!0)})))),Ze.push(a.commands.registerCommand("cmake.buildWorkspace",()=>Ye(this,void 0,void 0,(function*(){return yield Je.buildWorkspace()})))),Ze.push(a.commands.registerCommand("cmake.stopBuild",()=>Ye(this,void 0,void 0,(function*(){return yield Je.stopBuild(!1)})))),Ze.push(a.commands.registerCommand("cmake.stopCurrentBuild",()=>Ye(this,void 0,void 0,(function*(){return yield Je.stopBuild(!0)})))),Ze.push(a.commands.registerCommand("cmake.installProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.installProject()})))),Ze.push(a.commands.registerCommand("cmake.installCurrentProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.installProject(!0)})))),Ze.push(a.commands.registerCommand("cmake.selectProject",()=>Ye(this,void 0,void 0,(function*(){return yield Je.selectProject()})))),Ze.push(a.commands.registerCommand("cmake.selectTarget",()=>Ye(this,void 0,void 0,(function*(){return yield Je.selectTarget()})))),Ze.push(a.commands.registerCommand("cmake.selectConfiguration",()=>Ye(this,void 0,void 0,(function*(){return yield Je.selectConfiguration()})))),Ze.push(a.commands.registerCommand("cmake.cleanRestartClient",()=>Ye(this,void 0,void 0,(function*(){return yield Je.restartClient(!0)})))),Ze.push(a.commands.registerCommand("cmake.editConfigurations",()=>Ye(this,void 0,void 0,(function*(){return yield Je.editConfigurations()})))),Ze.push(a.commands.registerCommand("cmake.editCurrentConfigurations",()=>Ye(this,void 0,void 0,(function*(){return yield Je.editConfigurations(!0)}))));const i=yield Object(xe.getCppToolsApi)(xe.Version.v3);if(i){const t=new Xe(e);i.registerCustomConfigurationProvider(t),i.notifyReady(t),Ze.push(i,t,t.onDidChangeConfiguration(i.didChangeCustomBrowseConfiguration,i),t.onDidChangeConfiguration(i.didChangeCustomConfiguration,i),Je.onAddClient(t.addClient,t),Je.onDeleteClient(t.deleteClient,t),Je.onChangeClientModel(t.updateClient,t))}}))}function tt(){Je.dispose(),Ze.forEach(e=>e.dispose())}}]);
//# sourceMappingURL=extension.js.map